/**!
 * FlexSearch.js v0.8.202 (Bundle/Module)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */
var w;function H(a,b,c){const e=typeof c,d=typeof a;if("undefined"!==e){if("undefined"!==d){if(c){if("function"===d&&e===d)return function(h){return a(c(h))};b=a.constructor;if(b===c.constructor){if(b===Array)return c.concat(a);if(b===Map){var f=new Map(c);for(var g of a)f.set(g[0],g[1]);return f}if(b===Set){g=new Set(c);for(f of a.values())g.add(f);return g}}}return a}return c}return"undefined"===d?b:a}function aa(a,b){return"undefined"===typeof a?b:a}function I(){return Object.create(null)}
function M(a){return"string"===typeof a}function ba(a){return"object"===typeof a}function ca(a){const b=[];for(const c of a.keys())b.push(c);return b}function ea(a,b){if(M(b))a=a[b];else for(let c=0;a&&c<b.length;c++)a=a[b[c]];return a};const fa=/[^\p{L}\p{N}]+/u,ha=/(\d{3})/g,ia=/(\D)(\d{3})/g,ja=/(\d{3})(\D)/g,ka=/[\u0300-\u036f]/g;function la(a={}){if(!this||this.constructor!==la)return new la(...arguments);if(arguments.length)for(a=0;a<arguments.length;a++)this.assign(arguments[a]);else this.assign(a)}w=la.prototype;
w.assign=function(a){this.normalize=H(a.normalize,!0,this.normalize);let b=a.include,c=b||a.exclude||a.split,e;if(c||""===c){if("object"===typeof c&&c.constructor!==RegExp){let d="";e=!b;b||(d+="\\p{Z}");c.letter&&(d+="\\p{L}");c.number&&(d+="\\p{N}",e=!!b);c.symbol&&(d+="\\p{S}");c.punctuation&&(d+="\\p{P}");c.control&&(d+="\\p{C}");if(c=c.char)d+="object"===typeof c?c.join(""):c;try{this.split=new RegExp("["+(b?"^":"")+d+"]+","u")}catch(f){this.split=/\s+/}}else this.split=c,e=!1===c||2>"a1a".split(c).length;
this.numeric=H(a.numeric,e)}else{try{this.split=H(this.split,fa)}catch(d){this.split=/\s+/}this.numeric=H(a.numeric,H(this.numeric,!0))}this.prepare=H(a.prepare,null,this.prepare);this.finalize=H(a.finalize,null,this.finalize);c=a.filter;this.filter="function"===typeof c?c:H(c&&new Set(c),null,this.filter);this.dedupe=H(a.dedupe,!0,this.dedupe);this.matcher=H((c=a.matcher)&&new Map(c),null,this.matcher);this.mapper=H((c=a.mapper)&&new Map(c),null,this.mapper);this.stemmer=H((c=a.stemmer)&&new Map(c),
null,this.stemmer);this.replacer=H(a.replacer,null,this.replacer);this.minlength=H(a.minlength,1,this.minlength);this.maxlength=H(a.maxlength,1024,this.maxlength);this.rtl=H(a.rtl,!1,this.rtl);if(this.cache=c=H(a.cache,!0,this.cache))this.I=null,this.R="number"===typeof c?c:2E5,this.C=new Map,this.H=new Map,this.M=this.L=128;this.h="";this.N=null;this.B="";this.O=null;if(this.matcher)for(const d of this.matcher.keys())this.h+=(this.h?"|":"")+d;if(this.stemmer)for(const d of this.stemmer.keys())this.B+=
(this.B?"|":"")+d;return this};w.addStemmer=function(a,b){this.stemmer||(this.stemmer=new Map);this.stemmer.set(a,b);this.B+=(this.B?"|":"")+a;this.O=null;this.cache&&Q(this);return this};w.addFilter=function(a){"function"===typeof a?this.filter=a:(this.filter||(this.filter=new Set),this.filter.add(a));this.cache&&Q(this);return this};
w.addMapper=function(a,b){if("object"===typeof a)return this.addReplacer(a,b);if(1<a.length)return this.addMatcher(a,b);this.mapper||(this.mapper=new Map);this.mapper.set(a,b);this.cache&&Q(this);return this};w.addMatcher=function(a,b){if("object"===typeof a)return this.addReplacer(a,b);if(2>a.length&&(this.dedupe||this.mapper))return this.addMapper(a,b);this.matcher||(this.matcher=new Map);this.matcher.set(a,b);this.h+=(this.h?"|":"")+a;this.N=null;this.cache&&Q(this);return this};
w.addReplacer=function(a,b){if("string"===typeof a)return this.addMatcher(a,b);this.replacer||(this.replacer=[]);this.replacer.push(a,b);this.cache&&Q(this);return this};
w.encode=function(a,b){if(this.cache&&a.length<=this.L)if(this.I){if(this.C.has(a))return this.C.get(a)}else this.I=setTimeout(Q,50,this);this.normalize&&("function"===typeof this.normalize?a=this.normalize(a):a=ka?a.normalize("NFKD").replace(ka,"").toLowerCase():a.toLowerCase());this.prepare&&(a=this.prepare(a));this.numeric&&3<a.length&&(a=a.replace(ia,"$1 $2").replace(ja,"$1 $2").replace(ha,"$1 "));const c=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let e=
[],d=I(),f,g,h=this.split||""===this.split?a.split(this.split):[a];for(let l=0,m,q;l<h.length;l++)if((m=q=h[l])&&!(m.length<this.minlength||m.length>this.maxlength)){if(b){if(d[m])continue;d[m]=1}else{if(f===m)continue;f=m}if(c)e.push(m);else if(!this.filter||("function"===typeof this.filter?this.filter(m):!this.filter.has(m))){if(this.cache&&m.length<=this.M)if(this.I){var k=this.H.get(m);if(k||""===k){k&&e.push(k);continue}}else this.I=setTimeout(Q,50,this);if(this.stemmer){this.O||(this.O=new RegExp("(?!^)("+
this.B+")$"));let t;for(;t!==m&&2<m.length;)t=m,m=m.replace(this.O,r=>this.stemmer.get(r))}if(m&&(this.mapper||this.dedupe&&1<m.length)){k="";for(let t=0,r="",u,p;t<m.length;t++)u=m.charAt(t),u===r&&this.dedupe||((p=this.mapper&&this.mapper.get(u))||""===p?p===r&&this.dedupe||!(r=p)||(k+=p):k+=r=u);m=k}this.matcher&&1<m.length&&(this.N||(this.N=new RegExp("("+this.h+")","g")),m=m.replace(this.N,t=>this.matcher.get(t)));if(m&&this.replacer)for(k=0;m&&k<this.replacer.length;k+=2)m=m.replace(this.replacer[k],
this.replacer[k+1]);this.cache&&q.length<=this.M&&(this.H.set(q,m),this.H.size>this.R&&(this.H.clear(),this.M=this.M/1.1|0));if(m){if(m!==q)if(b){if(d[m])continue;d[m]=1}else{if(g===m)continue;g=m}e.push(m)}}}this.finalize&&(e=this.finalize(e)||e);this.cache&&a.length<=this.L&&(this.C.set(a,e),this.C.size>this.R&&(this.C.clear(),this.L=this.L/1.1|0));return e};function Q(a){a.I=null;a.C.clear();a.H.clear()};function ma(a,b,c){c||(b||"object"!==typeof a?"object"===typeof b&&(c=b,b=0):c=a);c&&(a=c.query||a,b=c.limit||b);let e=""+(b||0);c&&(e+=(c.offset||0)+!!c.context+!!c.suggest+(!1!==c.resolve)+(c.resolution||this.resolution)+(c.boost||0));a=(""+a).toLowerCase();this.cache||(this.cache=new R);let d=this.cache.get(a+e);if(!d){const f=c&&c.cache;f&&(c.cache=!1);d=this.search(a,b,c);f&&(c.cache=f);this.cache.set(a+e,d)}return d}function R(a){this.limit=a&&!0!==a?a:1E3;this.cache=new Map;this.h=""}
R.prototype.set=function(a,b){this.cache.set(this.h=a,b);this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};R.prototype.get=function(a){const b=this.cache.get(a);b&&this.h!==a&&(this.cache.delete(a),this.cache.set(this.h=a,b));return b};R.prototype.remove=function(a){for(const b of this.cache){const c=b[0];b[1].includes(a)&&this.cache.delete(c)}};R.prototype.clear=function(){this.cache.clear();this.h=""};const na={normalize:!1,numeric:!1,dedupe:!1};const qa={};const ra=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]);const sa=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),ta=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"];const ua={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"\u00df":2,d:3,t:3,l:4,m:5,n:5,r:6};var va={Exact:na,Default:qa,Normalize:qa,LatinBalance:{mapper:ra},LatinAdvanced:{mapper:ra,matcher:sa,replacer:ta},LatinExtra:{mapper:ra,replacer:ta.concat([/(?!^)[aeo]/g,""]),matcher:sa},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(a){for(let c=0;c<a.length;c++){var b=a[c];let e=b.charAt(0),d=ua[e];for(let f=1,g;f<b.length&&(g=b.charAt(f),"h"===g||"w"===g||!(g=ua[g])||g===d||(e+=g,d=g,4!==e.length));f++);a[c]=e}}},CJK:{split:""},LatinExact:na,LatinDefault:qa,LatinSimple:qa};function wa(a,b,c,e){let d=[];for(let f=0,g;f<a.index.length;f++)if(g=a.index[f],b>=g.length)b-=g.length;else{b=g[e?"splice":"slice"](b,c);const h=b.length;if(h&&(d=d.length?d.concat(b):b,c-=h,e&&(a.length-=h),!c))break;b=0}return d}
function xa(a){if(!this||this.constructor!==xa)return new xa(a);this.index=a?[a]:[];this.length=a?a.length:0;const b=this;return new Proxy([],{get(c,e){if("length"===e)return b.length;if("push"===e)return function(d){b.index[b.index.length-1].push(d);b.length++};if("pop"===e)return function(){if(b.length)return b.length--,b.index[b.index.length-1].pop()};if("indexOf"===e)return function(d){let f=0;for(let g=0,h,k;g<b.index.length;g++){h=b.index[g];k=h.indexOf(d);if(0<=k)return f+k;f+=h.length}return-1};
if("includes"===e)return function(d){for(let f=0;f<b.index.length;f++)if(b.index[f].includes(d))return!0;return!1};if("slice"===e)return function(d,f){return wa(b,d||0,f||b.length,!1)};if("splice"===e)return function(d,f){return wa(b,d||0,f||b.length,!0)};if("constructor"===e)return Array;if("symbol"!==typeof e)return(c=b.index[e/2**31|0])&&c[e]},set(c,e,d){c=e/2**31|0;(b.index[c]||(b.index[c]=[]))[e]=d;b.length++;return!0}})}xa.prototype.clear=function(){this.index.length=0};
xa.prototype.destroy=function(){this.proxy=this.index=null};xa.prototype.push=function(){};function S(a=8){if(!this||this.constructor!==S)return new S(a);this.index=I();this.h=[];this.size=0;32<a?(this.C=Aa,this.B=BigInt(a)):(this.C=Ba,this.B=a)}S.prototype.get=function(a){const b=this.index[this.C(a)];return b&&b.get(a)};S.prototype.set=function(a,b){var c=this.C(a);let e=this.index[c];e?(c=e.size,e.set(a,b),(c-=e.size)&&this.size++):(this.index[c]=e=new Map([[a,b]]),this.h.push(e),this.size++)};
function T(a=8){if(!this||this.constructor!==T)return new T(a);this.index=I();this.h=[];this.size=0;32<a?(this.C=Aa,this.B=BigInt(a)):(this.C=Ba,this.B=a)}T.prototype.add=function(a){var b=this.C(a);let c=this.index[b];c?(b=c.size,c.add(a),(b-=c.size)&&this.size++):(this.index[b]=c=new Set([a]),this.h.push(c),this.size++)};w=S.prototype;w.has=T.prototype.has=function(a){const b=this.index[this.C(a)];return b&&b.has(a)};
w.delete=T.prototype.delete=function(a){const b=this.index[this.C(a)];b&&b.delete(a)&&this.size--};w.clear=T.prototype.clear=function(){this.index=I();this.h=[];this.size=0};w.values=T.prototype.values=function*(){for(let a=0;a<this.h.length;a++)for(let b of this.h[a].values())yield b};w.keys=T.prototype.keys=function*(){for(let a=0;a<this.h.length;a++)for(let b of this.h[a].keys())yield b};w.entries=T.prototype.entries=function*(){for(let a=0;a<this.h.length;a++)for(let b of this.h[a].entries())yield b};
function Ba(a){let b=2**this.B-1;if("number"==typeof a)return a&b;let c=0,e=this.B+1;for(let d=0;d<a.length;d++)c=(c*e^a.charCodeAt(d))&b;return 32===this.B?c+2**31:c}function Aa(a){let b=BigInt(2)**this.B-BigInt(1);var c=typeof a;if("bigint"===c)return a&b;if("number"===c)return BigInt(a)&b;c=BigInt(0);let e=this.B+BigInt(1);for(let d=0;d<a.length;d++)c=(c*e^BigInt(a.charCodeAt(d)))&b;return c};let Ca,Da;
async function Ea(a){a=a.data;var b=a.task;const c=a.id;let e=a.args;switch(b){case "init":Da=a.options||{};(b=a.factory)?(Function("return "+b)()(self),Ca=new self.FlexSearch.Index(Da),delete self.FlexSearch):Ca=new V(Da);postMessage({id:c});break;default:let d;"export"===b&&(e[1]?(e[0]=Da.export,e[2]=0,e[3]=1):e=null);"import"===b?e[0]&&(a=await Da.import.call(Ca,e[0]),Ca.import(e[0],a)):((d=e&&Ca[b].apply(Ca,e))&&d.then&&(d=await d),d&&d.await&&(d=await d.await),"search"===b&&d.result&&(d=d.result));
postMessage("search"===b?{id:c,msg:d}:{id:c})}};function Fa(a){Ga.call(a,"add");Ga.call(a,"append");Ga.call(a,"search");Ga.call(a,"update");Ga.call(a,"remove");Ga.call(a,"searchCache")}let Ha,Ia,Ja;function Ka(){Ha=Ja=0}
function Ga(a){this[a+"Async"]=function(){const b=arguments;var c=b[b.length-1];let e;"function"===typeof c&&(e=c,delete b[b.length-1]);Ha?Ja||(Ja=Date.now()-Ia>=this.priority*this.priority*3):(Ha=setTimeout(Ka,0),Ia=Date.now());if(Ja){const f=this;return new Promise(g=>{setTimeout(function(){g(f[a+"Async"].apply(f,b))},0)})}const d=this[a].apply(this,b);c=d.then?d:new Promise(f=>f(d));e&&c.then(e);return c}};let W=0;
function La(a={},b){function c(h){function k(l){l=l.data||l;const m=l.id,q=m&&f.h[m];q&&(q(l.msg),delete f.h[m])}this.worker=h;this.h=I();if(this.worker){d?this.worker.on("message",k):this.worker.onmessage=k;if(a.config)return new Promise(function(l){1E9<W&&(W=0);f.h[++W]=function(){l(f)};f.worker.postMessage({id:W,task:"init",factory:e,options:a})});this.priority=a.priority||4;this.encoder=b||null;this.worker.postMessage({task:"init",factory:e,options:a});return this}}if(!this||this.constructor!==La)return new La(a);
let e="undefined"!==typeof self?self._factory:"undefined"!==typeof window?window._factory:null;e&&(e=e.toString());const d="undefined"===typeof window,f=this,g=Ma(e,d,a.worker);return g.then?g.then(function(h){return c.call(f,h)}):c.call(this,g)}X("add");X("append");X("search");X("update");X("remove");X("clear");X("export");X("import");La.prototype.searchCache=ma;Fa(La.prototype);
function X(a){La.prototype[a]=function(){const b=this,c=[].slice.call(arguments);var e=c[c.length-1];let d;"function"===typeof e&&(d=e,c.pop());e=new Promise(function(f){"export"===a&&"function"===typeof c[0]&&(c[0]=null);1E9<W&&(W=0);b.h[++W]=f;b.worker.postMessage({task:a,id:W,args:c})});return d?(e.then(d),this):e}}
function Ma(a,b,c){return b?"undefined"!==typeof module?new(require("worker_threads")["Worker"])(__dirname+"/worker/node.js"):import("worker_threads").then(function(worker){return new worker["Worker"](import.meta.dirname+"/node/node.mjs")}):a?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Ea.toString()],{type:"text/javascript"}))):new window.Worker("string"===typeof c?c:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js",
"module/worker/worker.js"),{type:"module"})};Na.prototype.add=function(a,b,c){ba(a)&&(b=a,a=ea(b,this.key));if(b&&(a||0===a)){if(!c&&this.reg.has(a))return this.update(a,b);for(let h=0,k;h<this.field.length;h++){k=this.G[h];var e=this.index.get(this.field[h]);if("function"===typeof k){var d=k(b);d&&e.add(a,d,!1,!0)}else if(d=k.J,!d||d(b))k.constructor===String?k=[""+k]:M(k)&&(k=[k]),Qa(b,k,this.K,0,e,a,k[0],c)}if(this.tag)for(e=0;e<this.F.length;e++){var f=this.F[e];d=this.tag.get(this.P[e]);let h=I();if("function"===typeof f){if(f=f(b),!f)continue}else{var g=
f.J;if(g&&!g(b))continue;f.constructor===String&&(f=""+f);f=ea(b,f)}if(d&&f){M(f)&&(f=[f]);for(let k=0,l,m;k<f.length;k++)if(l=f[k],!h[l]&&(h[l]=1,(g=d.get(l))?m=g:d.set(l,m=[]),!c||!m.includes(a))){if(m.length===2**31-1){g=new xa(m);if(this.fastupdate)for(let q of this.reg.values())q.includes(m)&&(q[q.indexOf(m)]=g);d.set(l,m=g)}m.push(a);this.fastupdate&&((g=this.reg.get(a))?g.push(m):this.reg.set(a,[m]))}}}if(this.store&&(!c||!this.store.has(a))){let h;if(this.D){h=I();for(let k=0,l;k<this.D.length;k++){l=
this.D[k];if((c=l.J)&&!c(b))continue;let m;if("function"===typeof l){m=l(b);if(!m)continue;l=[l.U]}else if(M(l)||l.constructor===String){h[l]=b[l];continue}Ra(b,h,l,0,l[0],m)}}this.store.set(a,h||b)}this.worker&&(this.fastupdate||this.reg.add(a))}return this};function Ra(a,b,c,e,d,f){a=a[d];if(e===c.length-1)b[d]=f||a;else if(a)if(a.constructor===Array)for(b=b[d]=Array(a.length),d=0;d<a.length;d++)Ra(a,b,c,e,d);else b=b[d]||(b[d]=I()),d=c[++e],Ra(a,b,c,e,d)}
function Qa(a,b,c,e,d,f,g,h){if(a=a[g])if(e===b.length-1){if(a.constructor===Array){if(c[e]){for(b=0;b<a.length;b++)d.add(f,a[b],!0,!0);return}a=a.join(" ")}d.add(f,a,h,!0)}else if(a.constructor===Array)for(g=0;g<a.length;g++)Qa(a,b,c,e,d,f,g,h);else g=b[++e],Qa(a,b,c,e,d,f,g,h)};function Sa(a,b,c,e){if(!a.length)return a;if(1===a.length)return a=a[0],a=c||a.length>b?a.slice(c,c+b):a,e?Ta.call(this,a):a;let d=[];for(let f=0,g,h;f<a.length;f++)if((g=a[f])&&(h=g.length)){if(c){if(c>=h){c-=h;continue}g=g.slice(c,c+b);h=g.length;c=0}h>b&&(g=g.slice(0,b),h=b);if(!d.length&&h>=b)return e?Ta.call(this,g):g;d.push(g);b-=h;if(!b)break}d=1<d.length?[].concat.apply([],d):d[0];return e?Ta.call(this,d):d};function Ua(a,b,c,e){var d=e[0];if(d[0]&&d[0].query)return a[b].apply(a,d);if(!("and"!==b&&"not"!==b||a.result.length||a.await||d.suggest))return 1<e.length&&(d=e[e.length-1]),(e=d.resolve)?a.await||a.result:a;let f=[],g=0,h=0,k,l,m,q,t;for(b=0;b<e.length;b++)if(d=e[b]){var r=void 0;if(d.constructor===Y)r=d.await||d.result;else if(d.then||d.constructor===Array)r=d;else{g=d.limit||0;h=d.offset||0;m=d.suggest;k=((q=(l=d.resolve)&&d.highlight)||d.enrich)&&l;r=d.queue;let u=d.async||r,p=d.index;p?a.index||
(a.index=p):p=a.index;if(d.query||d.tag){const n=d.field||d.pluck;n&&(d.query&&(a.query=d.query,a.field=n),p=p.index.get(n));if(r&&(t||a.await)){t=1;let y;const v=a.A.length,D=new Promise(function(B){y=B});(function(B,G){D.h=function(){G.index=null;G.resolve=!1;let A=u?B.searchAsync(G):B.search(G);if(A.then)return A.then(function(E){a.A[v]=E=E.result||E;y(E);return E});A=A.result||A;y(A);return A}})(p,Object.assign({},d));a.A.push(D);f[b]=D;continue}else d.resolve=!1,d.index=null,r=u?p.searchAsync(d):
p.search(d),d.resolve=l,d.index=p}else if(d.and)r=Va(d,"and",p);else if(d.or)r=Va(d,"or",p);else if(d.not)r=Va(d,"not",p);else if(d.xor)r=Va(d,"xor",p);else continue}r.await?(t=1,r=r.await):r.then?(t=1,r=r.then(function(u){return u.result||u})):r=r.result||r;f[b]=r}t&&!a.await&&(a.await=new Promise(function(u){a.return=u}));if(t){const u=Promise.all(f).then(function(p){for(let n=0;n<a.A.length;n++)if(a.A[n]===u){a.A[n]=function(){return c.call(a,p,g,h,k,l,m,q)};break}Wa(a)});a.A.push(u)}else if(a.await)a.A.push(function(){return c.call(a,
f,g,h,k,l,m,q)});else return c.call(a,f,g,h,k,l,m,q);return l?a.await||a.result:a}function Va(a,b,c){a=a[b];const e=a[0]||a;e.index||(e.index=c);c=new Y(e);1<a.length&&(c=c[b].apply(c,a.slice(1)));return c};Y.prototype.or=function(){return Ua(this,"or",Xa,arguments)};function Xa(a,b,c,e,d,f,g){a.length&&(this.result.length&&a.push(this.result),2>a.length?this.result=a[0]:(this.result=Ya(a,b,c,!1,this.h),c=0));d&&(this.await=null);return d?this.resolve(b,c,e,g):this};Y.prototype.and=function(){return Ua(this,"and",Za,arguments)};function Za(a,b,c,e,d,f,g){if(!f&&!this.result.length)return d?this.result:this;let h;if(a.length)if(this.result.length&&a.unshift(this.result),2>a.length)this.result=a[0];else{let k=0;for(let l=0,m,q;l<a.length;l++)if((m=a[l])&&(q=m.length))k<q&&(k=q);else if(!f){k=0;break}k?(this.result=$a(a,k,b,c,f,this.h,d),h=!0):this.result=[]}else f||(this.result=a);d&&(this.await=null);return d?this.resolve(b,c,e,g,h):this};Y.prototype.xor=function(){return Ua(this,"xor",ab,arguments)};
function ab(a,b,c,e,d,f,g){if(a.length)if(this.result.length&&a.unshift(this.result),2>a.length)this.result=a[0];else{a:{f=c;var h=this.h;const k=[],l=I();let m=0;for(let q=0,t;q<a.length;q++)if(t=a[q]){m<t.length&&(m=t.length);for(let r=0,u;r<t.length;r++)if(u=t[r])for(let p=0,n;p<u.length;p++)n=u[p],l[n]=l[n]?2:1}for(let q=0,t,r=0;q<m;q++)for(let u=0,p;u<a.length;u++)if(p=a[u])if(t=p[q])for(let n=0,y;n<t.length;n++)if(y=t[n],1===l[y])if(f)f--;else if(d){if(k.push(y),k.length===b){a=k;break a}}else{const v=
q+(u?h:0);k[v]||(k[v]=[]);k[v].push(y);if(++r===b){a=k;break a}}a=k}this.result=a;h=!0}else f||(this.result=a);d&&(this.await=null);return d?this.resolve(b,c,e,g,h):this};Y.prototype.not=function(){return Ua(this,"not",bb,arguments)};
function bb(a,b,c,e,d,f,g){if(!f&&!this.result.length)return d?this.result:this;if(a.length&&this.result.length){a:{f=c;var h=[];a=new Set(a.flat().flat());for(let k=0,l,m=0;k<this.result.length;k++)if(l=this.result[k])for(let q=0,t;q<l.length;q++)if(t=l[q],!a.has(t))if(f)f--;else if(d){if(h.push(t),h.length===b){a=h;break a}}else if(h[k]||(h[k]=[]),h[k].push(t),++m===b){a=h;break a}a=h}this.result=a;h=!0}d&&(this.await=null);return d?this.resolve(b,c,e,g,h):this};function cb(a,b,c,e,d){let f,g,h;"string"===typeof d?(f=d,d=""):f=d.template;g=f.indexOf("$1");h=f.substring(g+2);g=f.substring(0,g);let k=d&&d.boundary,l=!d||!1!==d.clip,m=d&&d.merge&&h&&g&&new RegExp(h+" "+g,"g");d=d&&d.ellipsis;var q=0;if("object"===typeof d){var t=d.template;q=t.length-2;d=d.pattern}"string"!==typeof d&&(d=!1===d?"":"...");q&&(d=t.replace("$1",d));t=d.length-q;let r,u;"object"===typeof k&&(r=k.before,0===r&&(r=-1),u=k.after,0===u&&(u=-1),k=k.total||9E5);q=new Map;for(let Oa=0,
da,db,oa;Oa<b.length;Oa++){let pa;if(e)pa=b,oa=e;else{var p=b[Oa];oa=p.field;if(!oa)continue;pa=p.result}db=c.get(oa);da=db.encoder;p=q.get(da);"string"!==typeof p&&(p=da.encode(a),q.set(da,p));for(let ya=0;ya<pa.length;ya++){var n=pa[ya].doc;if(!n)continue;n=ea(n,oa);if(!n)continue;var y=n.trim().split(/\s+/);if(!y.length)continue;n="";var v=[];let za=[];var D=-1,B=-1,G=0;for(var A=0;A<y.length;A++){var E=y[A],z=da.encode(E);z=1<z.length?z.join(" "):z[0];let x;if(z&&E){var C=E.length,K=(da.split?
E.replace(da.split,""):E).length-z.length,F="",N=0;for(var O=0;O<p.length;O++){var P=p[O];if(P){var L=P.length;L+=K;N&&L<=N||(P=z.indexOf(P),-1<P&&(F=(P?E.substring(0,P):"")+g+E.substring(P,P+L)+h+(P+L<C?E.substring(P+L):""),N=L,x=!0))}}F&&(k&&(0>D&&(D=n.length+(n?1:0)),B=n.length+(n?1:0)+F.length,G+=C,za.push(v.length),v.push({match:F})),n+=(n?" ":"")+F)}if(!x)E=y[A],n+=(n?" ":"")+E,k&&v.push({text:E});else if(k&&G>=k)break}G=za.length*(f.length-2);if(r||u||k&&n.length-G>k)if(G=k+G-2*t,A=B-D,0<r&&
(A+=r),0<u&&(A+=u),A<=G)y=r?D-(0<r?r:0):D-((G-A)/2|0),v=u?B+(0<u?u:0):y+G,l||(0<y&&" "!==n.charAt(y)&&" "!==n.charAt(y-1)&&(y=n.indexOf(" ",y),0>y&&(y=0)),v<n.length&&" "!==n.charAt(v-1)&&" "!==n.charAt(v)&&(v=n.lastIndexOf(" ",v),v<B?v=B:++v)),n=(y?d:"")+n.substring(y,v)+(v<n.length?d:"");else{B=[];D={};G={};A={};E={};z={};F=K=C=0;for(O=N=1;;){var U=void 0;for(let x=0,J;x<za.length;x++){J=za[x];if(F)if(K!==F){if(A[x+1])continue;J+=F;if(D[J]){C-=t;G[x+1]=1;A[x+1]=1;continue}if(J>=v.length-1){if(J>=
v.length){A[x+1]=1;J>=y.length&&(G[x+1]=1);continue}C-=t}n=v[J].text;if(L=u&&z[x])if(0<L){if(n.length>L)if(A[x+1]=1,l)n=n.substring(0,L);else continue;(L-=n.length)||(L=-1);z[x]=L}else{A[x+1]=1;continue}if(C+n.length+1<=k)n=" "+n,B[x]+=n;else if(l)U=k-C-1,0<U&&(n=" "+n.substring(0,U),B[x]+=n),A[x+1]=1;else{A[x+1]=1;continue}}else{if(A[x])continue;J-=K;if(D[J]){C-=t;A[x]=1;G[x]=1;continue}if(0>=J){if(0>J){A[x]=1;G[x]=1;continue}C-=t}n=v[J].text;if(L=r&&E[x])if(0<L){if(n.length>L)if(A[x]=1,l)n=n.substring(n.length-
L);else continue;(L-=n.length)||(L=-1);E[x]=L}else{A[x]=1;continue}if(C+n.length+1<=k)n+=" ",B[x]=n+B[x];else if(l)U=n.length+1-(k-C),0<=U&&U<n.length&&(n=n.substring(U)+" ",B[x]=n+B[x]),A[x]=1;else{A[x]=1;continue}}else{n=v[J].match;r&&(E[x]=r);u&&(z[x]=u);x&&C++;let Pa;J?!x&&t&&(C+=t):(G[x]=1,A[x]=1);J>=y.length-1?Pa=1:J<v.length-1&&v[J+1].match?Pa=1:t&&(C+=t);C-=f.length-2;if(!x||C+n.length<=k)B[x]=n;else{U=N=O=G[x]=0;break}Pa&&(G[x+1]=1,A[x+1]=1)}C+=n.length;U=D[J]=1}if(U)K===F?F++:K++;else{K===
F?N=0:O=0;if(!N&&!O)break;N?(K++,F=K):F++}}n="";for(let x=0,J;x<B.length;x++)J=(x&&G[x]?" ":(x&&!d?" ":"")+d)+B[x],n+=J;d&&!G[B.length]&&(n+=d)}m&&(n=n.replace(m," "));pa[ya].highlight=n}if(e)break}return b};function Y(a,b){if(!this||this.constructor!==Y)return new Y(a,b);let c=0,e,d,f,g,h;if(a&&a.index){const k=a;b=k.index;c=k.boost||0;if(d=k.query){f=k.field||k.pluck;const l=k.resolve;a=k.async||k.queue;k.resolve=!1;k.index=null;a=a?b.searchAsync(k):b.search(k);k.resolve=l;k.index=b;a=a.result||a}else a=[]}if(a&&a.then){const k=this;a=a.then(function(l){k.A[0]=k.result=l.result||l;Wa(k)});e=[a];a=[];g=new Promise(function(l){h=l})}this.index=b||null;this.result=a||[];this.h=c;this.A=e||[];this.await=
g||null;this.return=h||null;this.query=d||"";this.field=f||""}w=Y.prototype;w.limit=function(a){if(this.await){const b=this;this.A.push(function(){b.limit(a);return b.result})}else if(this.result.length){const b=[];for(let c=0,e;c<this.result.length;c++)if(e=this.result[c])if(e.length<=a){if(b[c]=e,a-=e.length,!a)break}else{b[c]=e.slice(0,a);break}this.result=b}return this};
w.offset=function(a){if(this.await){const b=this;this.A.push(function(){b.offset(a);return b.result})}else if(this.result.length){const b=[];for(let c=0,e;c<this.result.length;c++)if(e=this.result[c])e.length<=a?a-=e.length:(b[c]=e.slice(a),a=0);this.result=b}return this};w.boost=function(a){if(this.await){const b=this;this.A.push(function(){b.boost(a);return b.result})}else this.h+=a;return this};
function Wa(a,b){let c=a.result;var e=a.await;a.await=null;for(let d=0,f;d<a.A.length;d++)if(f=a.A[d])if("function"===typeof f)c=f(),a.A[d]=c=c.result||c,d--;else if(f.h)c=f.h(),a.A[d]=c=c.result||c,d--;else if(f.then)return a.await=e;e=a.return;a.A=[];a.return=null;b||e(c);return c}
w.resolve=function(a,b,c,e,d){let f=this.await?Wa(this,!0):this.result;if(f.then){const g=this;return f.then(function(){return g.resolve(a,b,c,e,d)})}f.length&&("object"===typeof a?(e=a.highlight,c=!!e||a.enrich,b=a.offset,a=a.limit):c=!!e||c,f=d?c?Ta.call(this.index,f):f:Sa.call(this.index,f,a||100,b,c));return this.finalize(f,e)};
w.finalize=function(a,b){if(a.then){const e=this;return a.then(function(d){return e.finalize(d,b)})}b&&a.length&&this.query&&(a=cb(this.query,a,this.index.index,this.field,b));const c=this.return;this.index=this.result=this.A=this.await=this.return=null;this.query=this.field="";c&&c(a);return a};function $a(a,b,c,e,d,f,g){const h=a.length;let k=[],l,m;l=I();for(let q=0,t,r,u,p;q<b;q++)for(let n=0;n<h;n++)if(u=a[n],q<u.length&&(t=u[q]))for(let y=0;y<t.length;y++){r=t[y];(m=l[r])?l[r]++:(m=0,l[r]=1);p=k[m]||(k[m]=[]);if(!g){let v=q+(n||!d?0:f||0);p=p[v]||(p[v]=[])}p.push(r);if(g&&c&&m===h-1&&p.length-e===c)return e?p.slice(e):p}if(a=k.length)if(d)k=1<k.length?Ya(k,c,e,g,f):(k=k[0])&&c&&k.length>c||e?k.slice(e,c+e):k;else{if(a<h)return[];k=k[a-1];if(c||e)if(g){if(k.length>c||e)k=k.slice(e,c+
e)}else{d=[];for(let q=0,t;q<k.length;q++)if(t=k[q])if(e&&t.length>e)e-=t.length;else{if(c&&t.length>c||e)t=t.slice(e,c+e),c-=t.length,e&&(e-=t.length);d.push(t);if(!c)break}k=d}}return k}
function Ya(a,b,c,e,d){const f=[],g=I();let h;var k=a.length;let l;if(e)for(d=k-1;0<=d;d--){if(l=(e=a[d])&&e.length)for(k=0;k<l;k++)if(h=e[k],!g[h])if(g[h]=1,c)c--;else if(f.push(h),f.length===b)return f}else for(let m=k-1,q,t=0;0<=m;m--){q=a[m];for(let r=0;r<q.length;r++)if(l=(e=q[r])&&e.length)for(let u=0;u<l;u++)if(h=e[u],!g[h])if(g[h]=1,c)c--;else{let p=(r+(m<k-1?d||0:0))/(m+1)|0;(f[p]||(f[p]=[])).push(h);if(++t===b)return f}}return f}
function eb(a,b,c){const e=I(),d=[];for(let f=0,g;f<b.length;f++){g=b[f];for(let h=0;h<g.length;h++)e[g[h]]=1}if(c)for(let f=0,g;f<a.length;f++)g=a[f],e[g]&&(d.push(g),e[g]=0);else for(let f=0,g,h;f<a.result.length;f++)for(g=a.result[f],b=0;b<g.length;b++)h=g[b],e[h]&&((d[f]||(d[f]=[])).push(h),e[h]=0);return d};I();Na.prototype.search=function(a,b,c,e){c||(!b&&ba(a)?(c=a,a=""):ba(b)&&(c=b,b=0));let d=[];var f=[];let g;let h,k,l,m,q;let t=0,r=!0,u;if(c){c.constructor===Array&&(c={index:c});a=c.query||a;g=c.pluck;h=c.merge;l=c.boost;q=g||c.field||(q=c.index)&&(q.index?null:q);var p=this.tag&&c.tag;k=c.suggest;r=!1!==c.resolve;m=c.cache;u=r&&this.store&&c.highlight;var n=!!u||r&&this.store&&c.enrich;b=c.limit||b;var y=c.offset||0;b||(b=r?100:0);if(p&&(!this.db||!e)){p.constructor!==Array&&(p=[p]);var v=[];for(let E=
0,z;E<p.length;E++)if(z=p[E],z.field&&z.tag){var D=z.tag;if(D.constructor===Array)for(var B=0;B<D.length;B++)v.push(z.field,D[B]);else v.push(z.field,D)}else{D=Object.keys(z);for(let C=0,K,F;C<D.length;C++)if(K=D[C],F=z[K],F.constructor===Array)for(B=0;B<F.length;B++)v.push(K,F[B]);else v.push(K,F)}p=v;if(!a){f=[];if(v.length)for(p=0;p<v.length;p+=2){if(this.db){e=this.index.get(v[p]);if(!e)continue;f.push(e=e.db.tag(v[p+1],b,y,n))}else e=fb.call(this,v[p],v[p+1],b,y,n);d.push(r?{field:v[p],tag:v[p+
1],result:e}:[e])}if(f.length){const E=this;return Promise.all(f).then(function(z){for(let C=0;C<z.length;C++)r?d[C].result=z[C]:d[C]=z[C];return r?d:new Y(1<d.length?$a(d,1,0,0,k,l):d[0],E)})}return r?d:new Y(1<d.length?$a(d,1,0,0,k,l):d[0],this)}}r||g||!(q=q||this.field)||(M(q)?g=q:(q.constructor===Array&&1===q.length&&(q=q[0]),g=q.field||q.index));q&&q.constructor!==Array&&(q=[q])}q||(q=this.field);let G;v=(this.worker||this.db)&&!e&&[];for(let E=0,z,C,K;E<q.length;E++){C=q[E];if(this.db&&this.tag&&
!this.G[E])continue;let F;M(C)||(F=C,C=F.field,a=F.query||a,b=aa(F.limit,b),y=aa(F.offset,y),k=aa(F.suggest,k),u=r&&this.store&&aa(F.highlight,u),n=!!u||r&&this.store&&aa(F.enrich,n),m=aa(F.cache,m));if(e)z=e[E];else{D=F||c||{};B=D.enrich;var A=this.index.get(C);p&&(this.db&&(D.tag=p,G=A.db.support_tag_search,D.field=q),!G&&B&&(D.enrich=!1));z=m?A.searchCache(a,b,D):A.search(a,b,D);B&&(D.enrich=B);if(v){v[E]=z;continue}}K=(z=z.result||z)&&z.length;if(p&&K){D=[];B=0;if(this.db&&e){if(!G)for(A=q.length;A<
e.length;A++){let N=e[A];if(N&&N.length)B++,D.push(N);else if(!k)return r?d:new Y(d,this)}}else for(let N=0,O,P;N<p.length;N+=2){O=this.tag.get(p[N]);if(!O)if(k)continue;else return r?d:new Y(d,this);if(P=(O=O&&O.get(p[N+1]))&&O.length)B++,D.push(O);else if(!k)return r?d:new Y(d,this)}if(B){z=eb(z,D,r);K=z.length;if(!K&&!k)return r?z:new Y(z,this);B--}}if(K)f[t]=C,d.push(z),t++;else if(1===q.length)return r?d:new Y(d,this)}if(v){if(this.db&&p&&p.length&&!G)for(n=0;n<p.length;n+=2){f=this.index.get(p[n]);
if(!f)if(k)continue;else return r?d:new Y(d,this);v.push(f.db.tag(p[n+1],b,y,!1))}const E=this;return Promise.all(v).then(function(z){c&&(c.resolve=r);z.length&&(z=E.search(a,b,c,z));return z})}if(!t)return r?d:new Y(d,this);if(g&&(!n||!this.store))return d=d[0],r?d:new Y(d,this);v=[];for(y=0;y<f.length;y++){p=d[y];n&&p.length&&"undefined"===typeof p[0].doc&&(this.db?v.push(p=this.index.get(this.field[0]).db.enrich(p)):p=Ta.call(this,p));if(g)return r?u?cb(a,p,this.index,g,u):p:new Y(p,this);d[y]=
{field:f[y],result:p}}if(n&&this.db&&v.length){const E=this;return Promise.all(v).then(function(z){for(let C=0;C<z.length;C++)d[C].result=z[C];u&&(d=cb(a,d,E.index,g,u));return h?gb(d):d})}u&&(d=cb(a,d,this.index,g,u));return h?gb(d):d};
function gb(a){const b=[],c=I(),e=I();for(let d=0,f,g,h,k,l,m,q;d<a.length;d++){f=a[d];g=f.field;h=f.result;for(let t=0;t<h.length;t++)if(l=h[t],"object"!==typeof l?l={id:k=l}:k=l.id,(m=c[k])?m.push(g):(l.field=c[k]=[g],b.push(l)),q=l.highlight)m=e[k],m||(e[k]=m={},l.highlight=m),m[g]=q}return b}function fb(a,b,c,e,d){a=this.tag.get(a);if(!a)return[];a=a.get(b);if(!a)return[];b=a.length-e;if(0<b){if(c&&b>c||e)a=a.slice(e,e+c);d&&(a=Ta.call(this,a))}return a}
function Ta(a){if(!this||!this.store)return a;if(this.db)return this.index.get(this.field[0]).db.enrich(a);const b=Array(a.length);for(let c=0,e;c<a.length;c++)e=a[c],b[c]={id:e,doc:this.store.get(e)};return b};function Na(a){if(!this||this.constructor!==Na)return new Na(a);const b=a.document||a.doc||a;let c,e;this.G=[];this.field=[];this.K=[];this.key=(c=b.key||b.id)&&hb(c,this.K)||"id";(e=a.keystore||0)&&(this.keystore=e);this.fastupdate=!!a.fastupdate;this.reg=!this.fastupdate||a.worker||a.db?e?new T(e):new Set:e?new S(e):new Map;this.D=(c=b.store||null)&&c&&!0!==c&&[];this.store=c&&(e?new S(e):new Map);this.cache=(c=a.cache||null)&&new R(c);a.cache=!1;this.worker=a.worker||!1;this.priority=a.priority||
4;this.index=ib.call(this,a,b);this.tag=null;if(c=b.tag)if("string"===typeof c&&(c=[c]),c.length){this.tag=new Map;this.F=[];this.P=[];for(let d=0,f,g;d<c.length;d++){f=c[d];g=f.field||f;if(!g)throw Error("The tag field from the document descriptor is undefined.");f.custom?this.F[d]=f.custom:(this.F[d]=hb(g,this.K),f.filter&&("string"===typeof this.F[d]&&(this.F[d]=new String(this.F[d])),this.F[d].J=f.filter));this.P[d]=g;this.tag.set(g,new Map)}}if(this.worker){this.fastupdate=!1;a=[];for(const d of this.index.values())d.then&&
a.push(d);if(a.length){const d=this;return Promise.all(a).then(function(f){let g=0;for(const h of d.index.entries()){const k=h[0];let l=h[1];l.then&&(l=f[g],d.index.set(k,l),g++)}return d})}}else a.db&&(this.fastupdate=!1,this.mount(a.db))}w=Na.prototype;
w.mount=function(a){let b=this.field;if(this.tag)for(let f=0,g;f<this.P.length;f++){g=this.P[f];var c=void 0;this.index.set(g,c=new V({},this.reg));b===this.field&&(b=b.slice(0));b.push(g);c.tag=this.tag.get(g)}c=[];const e={db:a.db,type:a.type,fastupdate:a.fastupdate};for(let f=0,g,h;f<b.length;f++){e.field=h=b[f];g=this.index.get(h);const k=new a.constructor(a.id,e);k.id=a.id;c[f]=k.mount(g);g.document=!0;f?g.bypass=!0:g.store=this.store}const d=this;return this.db=Promise.all(c).then(function(){d.db=
!0})};w.commit=async function(a,b){const c=[];for(const e of this.index.values())c.push(e.commit(a,b));await Promise.all(c);this.reg.clear()};w.destroy=function(){const a=[];for(const b of this.index.values())a.push(b.destroy());return Promise.all(a)};
function ib(a,b){const c=new Map;let e=b.index||b.field||b;M(e)&&(e=[e]);for(let f=0,g,h;f<e.length;f++){g=e[f];M(g)||(h=g,g=g.field);h=ba(h)?Object.assign({},a,h):a;if(this.worker){var d=void 0;d=(d=h.encoder)&&d.encode?d:new la("string"===typeof d?va[d]:d||{});d=new La(h,d);c.set(g,d)}this.worker||c.set(g,new V(h,this.reg));h.custom?this.G[f]=h.custom:(this.G[f]=hb(g,this.K),h.filter&&("string"===typeof this.G[f]&&(this.G[f]=new String(this.G[f])),this.G[f].J=h.filter));this.field[f]=g}if(this.D){a=
b.store;M(a)&&(a=[a]);for(let f=0,g,h;f<a.length;f++)g=a[f],h=g.field||g,g.custom?(this.D[f]=g.custom,g.custom.U=h):(this.D[f]=hb(h,this.K),g.filter&&("string"===typeof this.D[f]&&(this.D[f]=new String(this.D[f])),this.D[f].J=g.filter))}return c}function hb(a,b){const c=a.split(":");let e=0;for(let d=0;d<c.length;d++)a=c[d],"]"===a[a.length-1]&&(a=a.substring(0,a.length-2))&&(b[e]=!0),a&&(c[e++]=a);e<c.length&&(c.length=e);return 1<e?c:c[0]}w.append=function(a,b){return this.add(a,b,!0)};
w.update=function(a,b){return this.remove(a).add(a,b)};w.remove=function(a){ba(a)&&(a=ea(a,this.key));for(var b of this.index.values())b.remove(a,!0);if(this.reg.has(a)){if(this.tag&&!this.fastupdate)for(let c of this.tag.values())for(let e of c){b=e[0];const d=e[1],f=d.indexOf(a);-1<f&&(1<d.length?d.splice(f,1):c.delete(b))}this.store&&this.store.delete(a);this.reg.delete(a)}this.cache&&this.cache.remove(a);return this};
w.clear=function(){const a=[];for(const b of this.index.values()){const c=b.clear();c.then&&a.push(c)}if(this.tag)for(const b of this.tag.values())b.clear();this.store&&this.store.clear();this.cache&&this.cache.clear();return a.length?Promise.all(a):this};w.contain=function(a){return this.db?this.index.get(this.field[0]).db.has(a):this.reg.has(a)};w.cleanup=function(){for(const a of this.index.values())a.cleanup();return this};
w.get=function(a){return this.db?this.index.get(this.field[0]).db.enrich(a).then(function(b){return b[0]&&b[0].doc||null}):this.store.get(a)||null};w.set=function(a,b){"object"===typeof a&&(b=a,a=ea(b,this.key));this.store.set(a,b);return this};w.searchCache=ma;w.export=jb;w.import=kb;Fa(Na.prototype);function lb(a,b=0){let c=[],e=[];b&&(b=25E4/b*5E3|0);for(const d of a.entries())e.push(d),e.length===b&&(c.push(e),e=[]);e.length&&c.push(e);return c}function mb(a,b){b||(b=new Map);for(let c=0,e;c<a.length;c++)e=a[c],b.set(e[0],e[1]);return b}function nb(a,b=0){let c=[],e=[];b&&(b=25E4/b*1E3|0);for(const d of a.entries())e.push([d[0],lb(d[1])[0]]),e.length===b&&(c.push(e),e=[]);e.length&&c.push(e);return c}
function ob(a,b){b||(b=new Map);for(let c=0,e,d;c<a.length;c++)e=a[c],d=b.get(e[0]),b.set(e[0],mb(e[1],d));return b}function pb(a){let b=[],c=[];for(const e of a.keys())c.push(e),25E4===c.length&&(b.push(c),c=[]);c.length&&b.push(c);return b}function qb(a,b){b||(b=new Set);for(let c=0;c<a.length;c++)b.add(a[c]);return b}
function rb(a,b,c,e,d,f,g=0){const h=e&&e.constructor===Array;var k=h?e.shift():e;if(!k)return this.export(a,b,d,f+1);if((k=a((b?b+".":"")+(g+1)+"."+c,JSON.stringify(k)))&&k.then){const l=this;return k.then(function(){return rb.call(l,a,b,c,h?e:null,d,f,g+1)})}return rb.call(this,a,b,c,h?e:null,d,f,g+1)}
function jb(a,b,c=0,e=0){if(c<this.field.length){const g=this.field[c];if((b=this.index.get(g).export(a,g,c,e=1))&&b.then){const h=this;return b.then(function(){return h.export(a,g,c+1)})}return this.export(a,g,c+1)}let d,f;switch(e){case 0:d="reg";f=pb(this.reg);b=null;break;case 1:d="tag";f=this.tag&&nb(this.tag,this.reg.size);b=null;break;case 2:d="doc";f=this.store&&lb(this.store);b=null;break;default:return}return rb.call(this,a,b,d,f,c,e)}
function kb(a,b){var c=a.split(".");"json"===c[c.length-1]&&c.pop();const e=2<c.length?c[0]:"";c=2<c.length?c[2]:c[1];if(this.worker&&e)return this.index.get(e).import(a);if(b){"string"===typeof b&&(b=JSON.parse(b));if(e)return this.index.get(e).import(c,b);switch(c){case "reg":this.fastupdate=!1;this.reg=qb(b,this.reg);for(let d=0,f;d<this.field.length;d++)f=this.index.get(this.field[d]),f.fastupdate=!1,f.reg=this.reg;if(this.worker){b=[];for(const d of this.index.values())b.push(d.import(a));return Promise.all(b)}break;
case "tag":this.tag=ob(b,this.tag);break;case "doc":this.store=mb(b,this.store)}}}function sb(a,b){let c="";for(const e of a.entries()){a=e[0];const d=e[1];let f="";for(let g=0,h;g<d.length;g++){h=d[g]||[""];let k="";for(let l=0;l<h.length;l++)k+=(k?",":"")+("string"===b?'"'+h[l]+'"':h[l]);k="["+k+"]";f+=(f?",":"")+k}f='["'+a+'",['+f+"]]";c+=(c?",":"")+f}return c};V.prototype.remove=function(a,b){const c=this.reg.size&&(this.fastupdate?this.reg.get(a):this.reg.has(a));if(c){if(this.fastupdate)for(let e=0,d,f;e<c.length;e++){if((d=c[e])&&(f=d.length))if(d[f-1]===a)d.pop();else{const g=d.indexOf(a);0<=g&&d.splice(g,1)}}else tb(this.map,a),this.depth&&tb(this.ctx,a);b||this.reg.delete(a)}this.db&&(this.commit_task.push({del:a}),this.S&&ub(this));this.cache&&this.cache.remove(a);return this};
function tb(a,b){let c=0;var e="undefined"===typeof b;if(a.constructor===Array)for(let d=0,f,g,h;d<a.length;d++){if((f=a[d])&&f.length){if(e)return 1;g=f.indexOf(b);if(0<=g){if(1<f.length)return f.splice(g,1),1;delete a[d];if(c)return 1;h=1}else{if(h)return 1;c++}}}else for(let d of a.entries())e=d[0],tb(d[1],b)?c++:a.delete(e);return c};const vb={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};V.prototype.add=function(a,b,c,e){if(b&&(a||0===a)){if(!e&&!c&&this.reg.has(a))return this.update(a,b);e=this.depth;b=this.encoder.encode(b,!e);const l=b.length;if(l){const m=I(),q=I(),t=this.resolution;for(let r=0;r<l;r++){let u=b[this.rtl?l-1-r:r];var d=u.length;if(d&&(e||!q[u])){var f=this.score?this.score(b,u,r,null,0):wb(t,l,r),g="";switch(this.tokenize){case "full":if(2<d){for(let p=0,n;p<d;p++)for(f=d;f>p;f--){g=u.substring(p,f);n=this.rtl?d-1-p:p;var h=this.score?this.score(b,u,r,g,n):wb(t,
l,r,d,n);xb(this,q,g,h,a,c)}break}case "bidirectional":case "reverse":if(1<d){for(h=d-1;0<h;h--){g=u[this.rtl?d-1-h:h]+g;var k=this.score?this.score(b,u,r,g,h):wb(t,l,r,d,h);xb(this,q,g,k,a,c)}g=""}case "forward":if(1<d){for(h=0;h<d;h++)g+=u[this.rtl?d-1-h:h],xb(this,q,g,f,a,c);break}default:if(xb(this,q,u,f,a,c),e&&1<l&&r<l-1)for(d=I(),g=this.T,f=u,h=Math.min(e+1,this.rtl?r+1:l-r),d[f]=1,k=1;k<h;k++)if((u=b[this.rtl?l-1-r-k:r+k])&&!d[u]){d[u]=1;const p=this.score?this.score(b,f,r,u,k-1):wb(g+(l/
2>g?0:1),l,r,h-1,k-1),n=this.bidirectional&&u>f;xb(this,m,n?f:u,p,a,c,n?u:f)}}}}this.fastupdate||this.reg.add(a)}else b=""}this.db&&(b||this.commit_task.push({del:a}),this.S&&ub(this));return this};
function xb(a,b,c,e,d,f,g){let h=g?a.ctx:a.map,k;if(!b[c]||g&&!(k=b[c])[g])if(g?(b=k||(b[c]=I()),b[g]=1,(k=h.get(g))?h=k:h.set(g,h=new Map)):b[c]=1,(k=h.get(c))?h=k:h.set(c,h=k=[]),h=h[e]||(h[e]=[]),!f||!h.includes(d)){if(h.length===2**31-1){b=new xa(h);if(a.fastupdate)for(let l of a.reg.values())l.includes(h)&&(l[l.indexOf(h)]=b);k[e]=h=b}h.push(d);a.fastupdate&&((e=a.reg.get(d))?e.push(h):a.reg.set(d,[h]))}}
function wb(a,b,c,e,d){return c&&1<a?b+(e||0)<=a?c+(d||0):(a-1)/(b+(e||0))*(c+(d||0))+1|0:0};V.prototype.search=function(a,b,c){c||(b||"object"!==typeof a?"object"===typeof b&&(c=b,b=0):(c=a,a=""));if(c&&c.cache)return c.cache=!1,a=this.searchCache(a,b,c),c.cache=!0,a;let e=[],d,f,g,h=0,k,l,m,q,t;c&&(a=c.query||a,b=c.limit||b,h=c.offset||0,f=c.context,g=c.suggest,t=(k=c.resolve)&&c.enrich,m=c.boost,q=c.resolution,l=this.db&&c.tag);"undefined"===typeof k&&(k=this.resolve);f=this.depth&&!1!==f;let r=this.encoder.encode(a,!f);d=r.length;b=b||(k?100:0);if(1===d)return yb.call(this,r[0],"",b,
h,k,t,l);if(2===d&&f&&!g)return yb.call(this,r[1],r[0],b,h,k,t,l);let u=I(),p=0,n;f&&(n=r[0],p=1);q||0===q||(q=n?this.T:this.resolution);if(this.db){if(this.db.search&&(c=this.db.search(this,r,b,h,g,k,t,l),!1!==c))return c;const y=this;return async function(){for(let v,D;p<d;p++){if((D=r[p])&&!u[D]){u[D]=1;v=await zb(y,D,n,0,0,!1,!1);if(v=Ab(v,e,g,q)){e=v;break}n&&(g&&v&&e.length||(n=D))}g&&n&&p===d-1&&!e.length&&(q=y.resolution,n="",p=-1,u=I())}return Bb(e,q,b,h,g,m,k)}()}for(let y,v;p<d;p++){if((v=
r[p])&&!u[v]){u[v]=1;y=zb(this,v,n,0,0,!1,!1);if(y=Ab(y,e,g,q)){e=y;break}n&&(g&&y&&e.length||(n=v))}g&&n&&p===d-1&&!e.length&&(q=this.resolution,n="",p=-1,u=I())}return Bb(e,q,b,h,g,m,k)};function Bb(a,b,c,e,d,f,g){let h=a.length,k=a;if(1<h)k=$a(a,b,c,e,d,f,g);else if(1===h)return g?Sa.call(null,a[0],c,e):new Y(a[0],this);return g?k:new Y(k,this)}
function yb(a,b,c,e,d,f,g){a=zb(this,a,b,c,e,d,f,g);return this.db?a.then(function(h){return d?h||[]:new Y(h,this)}):a&&a.length?d?Sa.call(this,a,c,e):new Y(a,this):d?[]:new Y([],this)}function Ab(a,b,c,e){let d=[];if(a&&a.length){if(a.length<=e){b.push(a);return}for(let f=0,g;f<e;f++)if(g=a[f])d[f]=g;if(d.length){b.push(d);return}}if(!c)return d}
function zb(a,b,c,e,d,f,g,h){let k;c&&(k=a.bidirectional&&b>c)&&(k=c,c=b,b=k);if(a.db)return a.db.get(b,c,e,d,f,g,h);a=c?(a=a.ctx.get(c))&&a.get(b):a.map.get(b);return a};function V(a,b){if(!this||this.constructor!==V)return new V(a);if(a){var c=M(a)?a:a.preset;c&&(a=Object.assign({},vb[c],a))}else a={};c=a.context;const e=!0===c?{depth:1}:c||{},d=M(a.encoder)?va[a.encoder]:a.encode||a.encoder||{};this.encoder=d.encode?d:"object"===typeof d?new la(d):{encode:d};this.resolution=a.resolution||9;this.tokenize=c=(c=a.tokenize)&&"default"!==c&&"exact"!==c&&c||"strict";this.depth="strict"===c&&e.depth||0;this.bidirectional=!1!==e.bidirectional;this.fastupdate=!!a.fastupdate;
this.score=a.score||null;(c=a.keystore||0)&&(this.keystore=c);this.map=c?new S(c):new Map;this.ctx=c?new S(c):new Map;this.reg=b||(this.fastupdate?c?new S(c):new Map:c?new T(c):new Set);this.T=e.resolution||3;this.rtl=d.rtl||a.rtl||!1;this.cache=(c=a.cache||null)&&new R(c);this.resolve=!1!==a.resolve;if(c=a.db)this.db=this.mount(c);this.S=!1!==a.commit;this.commit_task=[];this.commit_timer=null;this.priority=a.priority||4}w=V.prototype;
w.mount=function(a){this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null);return a.mount(this)};w.commit=function(a,b){this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null);return this.db.commit(this,a,b)};w.destroy=function(){this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null);return this.db.destroy()};function ub(a){a.commit_timer||(a.commit_timer=setTimeout(function(){a.commit_timer=null;a.db.commit(a,void 0,void 0)},1))}
w.clear=function(){this.map.clear();this.ctx.clear();this.reg.clear();this.cache&&this.cache.clear();return this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this};w.append=function(a,b){return this.add(a,b,!0)};w.contain=function(a){return this.db?this.db.has(a):this.reg.has(a)};w.update=function(a,b){const c=this,e=this.remove(a);return e&&e.then?e.then(()=>c.add(a,b)):this.add(a,b)};
w.cleanup=function(){if(!this.fastupdate)return this;tb(this.map);this.depth&&tb(this.ctx);return this};w.searchCache=ma;w.export=function(a,b,c=0,e=0){let d,f;switch(e){case 0:d="reg";f=pb(this.reg);break;case 1:d="cfg";f=null;break;case 2:d="map";f=lb(this.map,this.reg.size);break;case 3:d="ctx";f=nb(this.ctx,this.reg.size);break;default:return}return rb.call(this,a,b,d,f,c,e)};
w.import=function(a,b){if(b)switch("string"===typeof b&&(b=JSON.parse(b)),a=a.split("."),"json"===a[a.length-1]&&a.pop(),3===a.length&&a.shift(),a=1<a.length?a[1]:a[0],a){case "reg":this.fastupdate=!1;this.reg=qb(b,this.reg);break;case "map":this.map=mb(b,this.map);break;case "ctx":this.ctx=ob(b,this.ctx)}};
w.serialize=function(a=!0){let b="",c="",e="";if(this.reg.size){let f;for(var d of this.reg.keys())f||(f=typeof d),b+=(b?",":"")+("string"===f?'"'+d+'"':d);b="index.reg=new Set(["+b+"]);";c=sb(this.map,f);c="index.map=new Map(["+c+"]);";for(const g of this.ctx.entries()){d=g[0];let h=sb(g[1],f);h="new Map(["+h+"])";h='["'+d+'",'+h+"]";e+=(e?",":"")+h}e="index.ctx=new Map(["+e+"]);"}return a?"function inject(index){"+b+c+e+"}":b+c+e};Fa(V.prototype);const Cb="undefined"!==typeof window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Db=["map","ctx","tag","reg","cfg"],Eb=I();
function Fb(a,b={}){if(!this||this.constructor!==Fb)return new Fb(a,b);"object"===typeof a&&(b=a,a=a.name);a||console.info("Default storage space was used, because a name was not passed.");this.id="flexsearch"+(a?":"+a.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"");this.field=b.field?b.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"";this.type=b.type;this.fastupdate=this.support_tag_search=!1;this.db=null;this.h={}}w=Fb.prototype;w.mount=function(a){if(a.index)return a.mount(this);a.db=this;return this.open()};
w.open=function(){if(this.db)return this.db;let a=this;navigator.storage&&navigator.storage.persist();Eb[a.id]||(Eb[a.id]=[]);Eb[a.id].push(a.field);const b=Cb.open(a.id,1);b.onupgradeneeded=function(){const c=a.db=this.result;for(let e=0,d;e<Db.length;e++){d=Db[e];for(let f=0,g;f<Eb[a.id].length;f++)g=Eb[a.id][f],c.objectStoreNames.contains(d+("reg"!==d?g?":"+g:"":""))||c.createObjectStore(d+("reg"!==d?g?":"+g:"":""))}};return a.db=Z(b,function(c){a.db=c;a.db.onversionchange=function(){a.close()}})};
w.close=function(){this.db&&this.db.close();this.db=null};w.destroy=function(){const a=Cb.deleteDatabase(this.id);return Z(a)};w.clear=function(){const a=[];for(let c=0,e;c<Db.length;c++){e=Db[c];for(let d=0,f;d<Eb[this.id].length;d++)f=Eb[this.id][d],a.push(e+("reg"!==e?f?":"+f:"":""))}const b=this.db.transaction(a,"readwrite");for(let c=0;c<a.length;c++)b.objectStore(a[c]).clear();return Z(b)};
w.get=function(a,b,c=0,e=0,d=!0,f=!1){a=this.db.transaction((b?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((b?"ctx":"map")+(this.field?":"+this.field:"")).get(b?b+":"+a:a);const g=this;return Z(a).then(function(h){let k=[];if(!h||!h.length)return k;if(d){if(!c&&!e&&1===h.length)return h[0];for(let l=0,m;l<h.length;l++)if((m=h[l])&&m.length){if(e>=m.length){e-=m.length;continue}const q=c?e+Math.min(m.length-e,c):m.length;for(let t=e;t<q;t++)k.push(m[t]);e=0;if(k.length===c)break}return f?
g.enrich(k):k}return h})};w.tag=function(a,b=0,c=0,e=!1){a=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(a);const d=this;return Z(a).then(function(f){if(!f||!f.length||c>=f.length)return[];if(!b&&!c)return f;f=f.slice(c,c+b);return e?d.enrich(f):f})};
w.enrich=function(a){"object"!==typeof a&&(a=[a]);const b=this.db.transaction("reg","readonly").objectStore("reg"),c=[];for(let e=0;e<a.length;e++)c[e]=Z(b.get(a[e]));return Promise.all(c).then(function(e){for(let d=0;d<e.length;d++)e[d]={id:a[d],doc:e[d]?JSON.parse(e[d]):null};return e})};w.has=function(a){a=this.db.transaction("reg","readonly").objectStore("reg").getKey(a);return Z(a).then(function(b){return!!b})};w.search=null;w.info=function(){};
w.transaction=function(a,b,c){a+="reg"!==a?this.field?":"+this.field:"":"";let e=this.h[a+":"+b];if(e)return c.call(this,e);let d=this.db.transaction(a,b);this.h[a+":"+b]=e=d.objectStore(a);const f=c.call(this,e);this.h[a+":"+b]=null;return Z(d).finally(function(){d=e=null;return f})};
w.commit=async function(a,b,c){if(b)await this.clear(),a.commit_task=[];else{let e=a.commit_task;a.commit_task=[];for(let d=0,f;d<e.length;d++)if(f=e[d],f.clear){await this.clear();b=!0;break}else e[d]=f.del;b||(c||(e=e.concat(ca(a.reg))),e.length&&await this.remove(e))}a.reg.size&&(await this.transaction("map","readwrite",function(e){for(const d of a.map){const f=d[0],g=d[1];g.length&&(b?e.put(g,f):e.get(f).onsuccess=function(){let h=this.result;var k;if(h&&h.length){const l=Math.max(h.length,g.length);
for(let m=0,q,t;m<l;m++)if((t=g[m])&&t.length){if((q=h[m])&&q.length)for(k=0;k<t.length;k++)q.push(t[k]);else h[m]=t;k=1}}else h=g,k=1;k&&e.put(h,f)})}}),await this.transaction("ctx","readwrite",function(e){for(const d of a.ctx){const f=d[0],g=d[1];for(const h of g){const k=h[0],l=h[1];l.length&&(b?e.put(l,f+":"+k):e.get(f+":"+k).onsuccess=function(){let m=this.result;var q;if(m&&m.length){const t=Math.max(m.length,l.length);for(let r=0,u,p;r<t;r++)if((p=l[r])&&p.length){if((u=m[r])&&u.length)for(q=
0;q<p.length;q++)u.push(p[q]);else m[r]=p;q=1}}else m=l,q=1;q&&e.put(m,f+":"+k)})}}}),a.store?await this.transaction("reg","readwrite",function(e){for(const d of a.store){const f=d[0],g=d[1];e.put("object"===typeof g?JSON.stringify(g):1,f)}}):a.bypass||await this.transaction("reg","readwrite",function(e){for(const d of a.reg.keys())e.put(1,d)}),a.tag&&await this.transaction("tag","readwrite",function(e){for(const d of a.tag){const f=d[0],g=d[1];g.length&&(e.get(f).onsuccess=function(){let h=this.result;
h=h&&h.length?h.concat(g):g;e.put(h,f)})}}),a.map.clear(),a.ctx.clear(),a.tag&&a.tag.clear(),a.store&&a.store.clear(),a.document||a.reg.clear())};function Gb(a,b,c){const e=a.value;let d,f=0;for(let g=0,h;g<e.length;g++){if(h=c?e:e[g]){for(let k=0,l,m;k<b.length;k++)if(m=b[k],l=h.indexOf(m),0<=l)if(d=1,1<h.length)h.splice(l,1);else{e[g]=[];break}f+=h.length}if(c)break}f?d&&a.update(e):a.delete();a.continue()}
w.remove=function(a){"object"!==typeof a&&(a=[a]);return Promise.all([this.transaction("map","readwrite",function(b){b.openCursor().onsuccess=function(){const c=this.result;c&&Gb(c,a)}}),this.transaction("ctx","readwrite",function(b){b.openCursor().onsuccess=function(){const c=this.result;c&&Gb(c,a)}}),this.transaction("tag","readwrite",function(b){b.openCursor().onsuccess=function(){const c=this.result;c&&Gb(c,a,!0)}}),this.transaction("reg","readwrite",function(b){for(let c=0;c<a.length;c++)b.delete(a[c])})])};
function Z(a,b){return new Promise((c,e)=>{a.onsuccess=a.oncomplete=function(){b&&b(this.result);b=null;c(this.result)};a.onerror=a.onblocked=e;a=null})};export default {Index:V,Charset:va,Encoder:la,Document:Na,Worker:La,Resolver:Y,IndexedDB:Fb,Language:{}};
export const Index=V;export const Charset=va;export const Encoder=la;export const Document=Na;export const Worker=La;export const Resolver=Y;export const IndexedDB=Fb;export const Language={};