/**!
 * FlexSearch.js v0.8.160 (Bundle)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */
(function(self){'use strict';var A;function H(a,c,b){const e=typeof b,d=typeof a;if("undefined"!==e){if("undefined"!==d){if(b){if("function"===d&&e===d)return function(k){return a(b(k))};c=a.constructor;if(c===b.constructor){if(c===Array)return b.concat(a);if(c===Map){var f=new Map(b);for(var g of a)f.set(g[0],g[1]);return f}if(c===Set){g=new Set(b);for(f of a.values())g.add(f);return g}}}return a}return b}return"undefined"===d?c:a}function I(){return Object.create(null)}function J(a){return"string"===typeof a}
function O(a){return"object"===typeof a}function Q(a,c){if(J(c))a=a[c];else for(let b=0;a&&b<c.length;b++)a=a[c[b]];return a}function aa(a){let c=0;for(let b=0,e;b<a.length;b++)(e=a[b])&&c<e.length&&(c=e.length);return c};const ba=/[^\p{L}\p{N}]+/u,ea=/(\d{3})/g,fa=/(\D)(\d{3})/g,ha=/(\d{3})(\D)/g,ia=/[\u0300-\u036f]/g;function ja(a={}){if(!this||this.constructor!==ja)return new ja(...arguments);if(arguments.length)for(a=0;a<arguments.length;a++)this.assign(arguments[a]);else this.assign(a)}A=ja.prototype;
A.assign=function(a){this.normalize=H(a.normalize,!0,this.normalize);let c=a.include,b=c||a.exclude||a.split,e;if(b||""===b){if("object"===typeof b&&b.constructor!==RegExp){let d="";e=!c;c||(d+="\\p{Z}");b.letter&&(d+="\\p{L}");b.number&&(d+="\\p{N}",e=!!c);b.symbol&&(d+="\\p{S}");b.punctuation&&(d+="\\p{P}");b.control&&(d+="\\p{C}");if(b=b.char)d+="object"===typeof b?b.join(""):b;try{this.split=new RegExp("["+(c?"^":"")+d+"]+","u")}catch(f){this.split=/\s+/}}else this.split=b,e=!1===b||2>"a1a".split(b).length;
this.numeric=H(a.numeric,e)}else{try{this.split=H(this.split,ba)}catch(d){this.split=/\s+/}this.numeric=H(a.numeric,H(this.numeric,!0))}this.prepare=H(a.prepare,null,this.prepare);this.finalize=H(a.finalize,null,this.finalize);b=a.filter;this.filter="function"===typeof b?b:H(b&&new Set(b),null,this.filter);this.dedupe=H(a.dedupe,!0,this.dedupe);this.matcher=H((b=a.matcher)&&new Map(b),null,this.matcher);this.mapper=H((b=a.mapper)&&new Map(b),null,this.mapper);this.stemmer=H((b=a.stemmer)&&new Map(b),
null,this.stemmer);this.replacer=H(a.replacer,null,this.replacer);this.minlength=H(a.minlength,1,this.minlength);this.maxlength=H(a.maxlength,1024,this.maxlength);this.rtl=H(a.rtl,!1,this.rtl);if(this.cache=b=H(a.cache,!0,this.cache))this.H=null,this.R="number"===typeof b?b:2E5,this.F=new Map,this.G=new Map,this.L=this.K=128;this.h="";this.M=null;this.C="";this.N=null;if(this.matcher)for(const d of this.matcher.keys())this.h+=(this.h?"|":"")+d;if(this.stemmer)for(const d of this.stemmer.keys())this.C+=
(this.C?"|":"")+d;return this};A.addStemmer=function(a,c){this.stemmer||(this.stemmer=new Map);this.stemmer.set(a,c);this.C+=(this.C?"|":"")+a;this.N=null;this.cache&&R(this);return this};A.addFilter=function(a){"function"===typeof a?this.filter=a:(this.filter||(this.filter=new Set),this.filter.add(a));this.cache&&R(this);return this};
A.addMapper=function(a,c){if("object"===typeof a)return this.addReplacer(a,c);if(1<a.length)return this.addMatcher(a,c);this.mapper||(this.mapper=new Map);this.mapper.set(a,c);this.cache&&R(this);return this};A.addMatcher=function(a,c){if("object"===typeof a)return this.addReplacer(a,c);if(2>a.length&&(this.dedupe||this.mapper))return this.addMapper(a,c);this.matcher||(this.matcher=new Map);this.matcher.set(a,c);this.h+=(this.h?"|":"")+a;this.M=null;this.cache&&R(this);return this};
A.addReplacer=function(a,c){if("string"===typeof a)return this.addMatcher(a,c);this.replacer||(this.replacer=[]);this.replacer.push(a,c);this.cache&&R(this);return this};
A.encode=function(a,c){if(this.cache&&a.length<=this.K)if(this.H){if(this.F.has(a))return this.F.get(a)}else this.H=setTimeout(R,50,this);this.normalize&&("function"===typeof this.normalize?a=this.normalize(a):a=ia?a.normalize("NFKD").replace(ia,"").toLowerCase():a.toLowerCase());this.prepare&&(a=this.prepare(a));this.numeric&&3<a.length&&(a=a.replace(fa,"$1 $2").replace(ha,"$1 $2").replace(ea,"$1 "));const b=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let e=
[],d=I(),f,g,k=this.split||""===this.split?a.split(this.split):[a];for(let l=0,m,p;l<k.length;l++)if((m=p=k[l])&&!(m.length<this.minlength||m.length>this.maxlength)){if(c){if(d[m])continue;d[m]=1}else{if(f===m)continue;f=m}if(b)e.push(m);else if(!this.filter||("function"===typeof this.filter?this.filter(m):!this.filter.has(m))){if(this.cache&&m.length<=this.L)if(this.H){var h=this.G.get(m);if(h||""===h){h&&e.push(h);continue}}else this.H=setTimeout(R,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+
this.C+")$"));let r;for(;r!==m&&2<m.length;)r=m,m=m.replace(this.N,q=>this.stemmer.get(q))}if(m&&(this.mapper||this.dedupe&&1<m.length)){h="";for(let r=0,q="",t,w;r<m.length;r++)t=m.charAt(r),t===q&&this.dedupe||((w=this.mapper&&this.mapper.get(t))||""===w?w===q&&this.dedupe||!(q=w)||(h+=w):h+=q=t);m=h}this.matcher&&1<m.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),m=m.replace(this.M,r=>this.matcher.get(r)));if(m&&this.replacer)for(h=0;m&&h<this.replacer.length;h+=2)m=m.replace(this.replacer[h],
this.replacer[h+1]);this.cache&&p.length<=this.L&&(this.G.set(p,m),this.G.size>this.R&&(this.G.clear(),this.L=this.L/1.1|0));if(m){if(m!==p)if(c){if(d[m])continue;d[m]=1}else{if(g===m)continue;g=m}e.push(m)}}}this.finalize&&(e=this.finalize(e)||e);this.cache&&a.length<=this.K&&(this.F.set(a,e),this.F.size>this.R&&(this.F.clear(),this.K=this.K/1.1|0));return e};function R(a){a.H=null;a.F.clear();a.G.clear()};function ka(a){na.call(a,"add");na.call(a,"append");na.call(a,"search");na.call(a,"update");na.call(a,"remove")}let oa,pa,qa;function ra(){oa=qa=0}
function na(a){this[a+"Async"]=function(){const c=arguments;var b=c[c.length-1];let e;"function"===typeof b&&(e=b,delete c[c.length-1]);oa?qa||(qa=Date.now()-pa>=this.priority*this.priority*3):(oa=setTimeout(ra,0),pa=Date.now());if(qa){const f=this;return new Promise(g=>{setTimeout(function(){g(f[a+"Async"].apply(f,c))},0)})}const d=this[a].apply(this,c);b=d.then?d:new Promise(f=>f(d));e&&b.then(e);return b}};function sa(a,c=0){let b=[],e=[];c&&(c=25E4/c*5E3|0);for(const d of a.entries())e.push(d),e.length===c&&(b.push(e),e=[]);e.length&&b.push(e);return b}function ta(a,c){c||(c=new Map);for(let b=0,e;b<a.length;b++)e=a[b],c.set(e[0],e[1]);return c}function ua(a,c=0){let b=[],e=[];c&&(c=25E4/c*1E3|0);for(const d of a.entries())e.push([d[0],sa(d[1])[0]]),e.length===c&&(b.push(e),e=[]);e.length&&b.push(e);return b}
function va(a,c){c||(c=new Map);for(let b=0,e,d;b<a.length;b++)e=a[b],d=c.get(e[0]),c.set(e[0],ta(e[1],d));return c}function ya(a){let c=[],b=[];for(const e of a.keys())b.push(e),25E4===b.length&&(c.push(b),b=[]);b.length&&c.push(b);return c}function za(a,c){c||(c=new Set);for(let b=0;b<a.length;b++)c.add(a[b]);return c}
function Aa(a,c,b,e,d,f,g=0){const k=e&&e.constructor===Array;var h=k?e.shift():e;if(!h)return this.export(a,c,d,f+1);if((h=a((c?c+".":"")+(g+1)+"."+b,JSON.stringify(h)))&&h.then){const l=this;return h.then(function(){return Aa.call(l,a,c,b,k?e:null,d,f,g+1)})}return Aa.call(this,a,c,b,k?e:null,d,f,g+1)}
function Ba(a,c){let b="";for(const e of a.entries()){a=e[0];const d=e[1];let f="";for(let g=0,k;g<d.length;g++){k=d[g]||[""];let h="";for(let l=0;l<k.length;l++)h+=(h?",":"")+("string"===c?'"'+k[l]+'"':k[l]);h="["+h+"]";f+=(f?",":"")+h}f='["'+a+'",['+f+"]]";b+=(b?",":"")+f}return b};T.prototype.add=function(a,c,b){O(a)&&(c=a,a=Q(c,this.key));if(c&&(a||0===a)){if(!b&&this.reg.has(a))return this.update(a,c);for(let k=0,h;k<this.field.length;k++){h=this.D[k];var e=this.index.get(this.field[k]);if("function"===typeof h){var d=h(c);d&&e.add(a,d,!1,!0)}else if(d=h.I,!d||d(c))h.constructor===String?h=[""+h]:J(h)&&(h=[h]),Ca(c,h,this.J,0,e,a,h[0],b)}if(this.tag)for(e=0;e<this.B.length;e++){var f=this.B[e];d=this.tag.get(this.T[e]);let k=I();if("function"===typeof f){if(f=f(c),!f)continue}else{var g=
f.I;if(g&&!g(c))continue;f.constructor===String&&(f=""+f);f=Q(c,f)}if(d&&f){J(f)&&(f=[f]);for(let h=0,l,m;h<f.length;h++)l=f[h],k[l]||(k[l]=1,(g=d.get(l))?m=g:d.set(l,m=[]),b&&m.includes(a)||(m.push(a),this.fastupdate&&((g=this.reg.get(a))?g.push(m):this.reg.set(a,[m]))))}}if(this.store&&(!b||!this.store.has(a))){let k;if(this.A){k=I();for(let h=0,l;h<this.A.length;h++){l=this.A[h];if((b=l.I)&&!b(c))continue;let m;if("function"===typeof l){m=l(c);if(!m)continue;l=[l.U]}else if(J(l)||l.constructor===
String){k[l]=c[l];continue}Da(c,k,l,0,l[0],m)}}this.store.set(a,k||c)}}return this};function Da(a,c,b,e,d,f){a=a[d];if(e===b.length-1)c[d]=f||a;else if(a)if(a.constructor===Array)for(c=c[d]=Array(a.length),d=0;d<a.length;d++)Da(a,c,b,e,d);else c=c[d]||(c[d]=I()),d=b[++e],Da(a,c,b,e,d)}
function Ca(a,c,b,e,d,f,g,k){if(a=a[g])if(e===c.length-1){if(a.constructor===Array){if(b[e]){for(c=0;c<a.length;c++)d.add(f,a[c],!0,!0);return}a=a.join(" ")}d.add(f,a,k,!0)}else if(a.constructor===Array)for(g=0;g<a.length;g++)Ca(a,c,b,e,d,f,g,k);else g=c[++e],Ca(a,c,b,e,d,f,g,k)};function Ea(a,c,b,e,d){const f=a.length;let g=[],k,h;k=I();for(let l=0,m,p,r,q;l<c;l++)for(let t=0;t<f;t++)if(r=a[t],l<r.length&&(m=r[l]))for(let w=0;w<m.length;w++)if(p=m[w],(h=k[p])?k[p]++:(h=0,k[p]=1),q=g[h]||(g[h]=[]),q.push(p),b&&h===f-1&&q.length-e===b)return e?q.slice(e):q;if(a=g.length)if(d)g=1<g.length?Fa(g,b,e):(g=g[0]).length>b||e?g.slice(e,b+e):g;else{if(a<f)return[];g=g[a-1];if(b||e)if(g.length>b||e)g=g.slice(e,b+e)}return g}
function Fa(a,c,b){const e=[],d=I();let f;var g=a.length;let k;for(let h=g-1;0<=h;h--)if(k=(g=a[h])&&g.length)for(let l=0;l<k;l++)if(f=g[l],!d[f])if(d[f]=1,b)b--;else if(e.push(f),e.length===c)return e;return e}function Ga(a,c){const b=I(),e=[];for(let d=0,f;d<c.length;d++){f=c[d];for(let g=0;g<f.length;g++)b[f[g]]=1}for(let d=0,f;d<a.length;d++)f=a[d],b[f]&&(e.push(f),b[f]=0);return e};function Ha(a,c,b,e){if(!a.length)return a;if(1===a.length)return a=a[0],a=b||a.length>c?c?a.slice(b,b+c):a.slice(b):a,e?U.call(this,a):a;let d=[];for(let f=0,g,k;f<a.length;f++)if((g=a[f])&&(k=g.length)){if(b){if(b>=k){b-=k;continue}b<k&&(g=c?g.slice(b,b+c):g.slice(b),k=g.length,b=0)}k>c&&(g=g.slice(0,c),k=c);if(!d.length&&k>=c)return e?U.call(this,g):g;d.push(g);c-=k;if(!c)break}d=1<d.length?[].concat.apply([],d):d[0];return e?U.call(this,d):d};function Ia(a,c,b){var e=b[0];if(e.then)return Promise.all(b).then(function(m){return a[c].apply(a,m)});if(e[0]&&e[0].index)return a[c].apply(a,e);e=[];let d=[],f=0,g=0,k,h,l;for(let m=0,p;m<b.length;m++)if(p=b[m]){let r;if(p.constructor===X)r=p.result;else if(p.constructor===Array)r=p;else if(f=p.limit||0,g=p.offset||0,l=p.suggest,h=p.resolve,k=p.enrich&&h,p.index)p.resolve=!1,r=p.index.search(p).result,p.resolve=h;else if(p.and)r=a.and(p.and);else if(p.or)r=a.or(p.or);else if(p.xor)r=a.xor(p.xor);
else if(p.not)r=a.not(p.not);else continue;if(r.then)d.push(r);else if(r.length)e[m]=r;else if(!l&&("and"===c||"xor"===c)){e=[];break}}return{O:e,P:d,limit:f,offset:g,enrich:k,resolve:h,suggest:l}};X.prototype.or=function(){const {O:a,P:c,limit:b,offset:e,enrich:d,resolve:f}=Ia(this,"or",arguments);return Ja.call(this,a,c,b,e,d,f)};function Ja(a,c,b,e,d,f){if(c.length){const g=this;return Promise.all(c).then(function(k){a=[];for(let h=0,l;h<k.length;h++)(l=k[h]).length&&(a[h]=l);return Ja.call(g,a,[],b,e,d,f)})}a.length&&(this.result.length&&a.push(this.result),2>a.length?this.result=a[0]:(this.result=Fa(a,b,e),e=0));return f?this.resolve(b,e,d):this};X.prototype.and=function(){let a=this.result.length,c,b,e,d;if(!a){const f=arguments[0];f&&(a=!!f.suggest,d=f.resolve,c=f.limit,b=f.offset,e=f.enrich&&d)}if(a){const {O:f,P:g,limit:k,offset:h,enrich:l,resolve:m,suggest:p}=Ia(this,"and",arguments);return Ka.call(this,f,g,k,h,l,m,p)}return d?this.resolve(c,b,e):this};
function Ka(a,c,b,e,d,f,g){if(c.length){const k=this;return Promise.all(c).then(function(h){a=[];for(let l=0,m;l<h.length;l++)(m=h[l]).length&&(a[l]=m);return Ka.call(k,a,[],b,e,d,f,g)})}if(a.length)if(this.result.length&&a.unshift(this.result),2>a.length)this.result=a[0];else{if(c=aa(a))return this.result=Ea(a,c,b,e,g),f?d?U.call(this.index,this.result):this.result:this;this.result=[]}else g||(this.result=a);return f?this.resolve(b,e,d):this};X.prototype.xor=function(){const {O:a,P:c,limit:b,offset:e,enrich:d,resolve:f,suggest:g}=Ia(this,"xor",arguments);return La.call(this,a,c,b,e,d,f,g)};
function La(a,c,b,e,d,f,g){if(c.length){const k=this;return Promise.all(c).then(function(h){a=[];for(let l=0,m;l<h.length;l++)(m=h[l]).length&&(a[l]=m);return La.call(k,a,[],b,e,d,f,g)})}if(a.length)if(this.result.length&&a.unshift(this.result),2>a.length)this.result=a[0];else return this.result=Ma.call(this,a,b,e,f,this.h),f?d?U.call(this.index,this.result):this.result:this;else g||(this.result=a);return f?this.resolve(b,e,d):this}
function Ma(a,c,b,e,d){const f=[],g=I();let k=0;for(let h=0,l;h<a.length;h++)if(l=a[h]){k<l.length&&(k=l.length);for(let m=0,p;m<l.length;m++)if(p=l[m])for(let r=0,q;r<p.length;r++)q=p[r],g[q]=g[q]?2:1}for(let h=0,l,m=0;h<k;h++)for(let p=0,r;p<a.length;p++)if(r=a[p])if(l=r[h])for(let q=0,t;q<l.length;q++)if(t=l[q],1===g[t])if(b)b--;else if(e){if(f.push(t),f.length===c)return f}else{const w=h+(p?d:0);f[w]||(f[w]=[]);f[w].push(t);if(++m===c)return f}return f};X.prototype.not=function(){const {O:a,P:c,limit:b,offset:e,enrich:d,resolve:f,suggest:g}=Ia(this,"not",arguments);return Na.call(this,a,c,b,e,d,f,g)};function Na(a,c,b,e,d,f,g){if(c.length){const k=this;return Promise.all(c).then(function(h){a=[];for(let l=0,m;l<h.length;l++)(m=h[l]).length&&(a[l]=m);return Na.call(k,a,[],b,e,d,f,g)})}if(a.length&&this.result.length)this.result=Oa.call(this,a,b,e,f);else if(f)return this.resolve(b,e,d);return f?d?U.call(this.index,this.result):this.result:this}
function Oa(a,c,b,e){const d=[];a=new Set(a.flat().flat());for(let f=0,g,k=0;f<this.result.length;f++)if(g=this.result[f])for(let h=0,l;h<g.length;h++)if(l=g[h],!a.has(l))if(b)b--;else if(e){if(d.push(l),d.length===c)return d}else if(d[f]||(d[f]=[]),d[f].push(l),++k===c)return d;return d};function X(a){if(!this||this.constructor!==X)return new X(a);if(a&&a.index)return a.resolve=!1,this.index=a.index,this.h=a.boost||0,this.result=a.index.search(a).result,this;this.index=null;this.result=a||[];this.h=0}X.prototype.limit=function(a){if(this.result.length){const c=[];for(let b=0,e;b<this.result.length;b++)if(e=this.result[b])if(e.length<=a){if(c[b]=e,a-=e.length,!a)break}else{c[b]=e.slice(0,a);break}this.result=c}return this};
X.prototype.offset=function(a){if(this.result.length){const c=[];for(let b=0,e;b<this.result.length;b++)if(e=this.result[b])e.length<=a?a-=e.length:(c[b]=e.slice(a),a=0);this.result=c}return this};X.prototype.boost=function(a){this.h+=a;return this};X.prototype.resolve=function(a,c,b){const e=this.result,d=this.index;this.result=this.index=null;return e.length?("object"===typeof a&&(b=a.enrich,c=a.offset,a=a.limit),Ha.call(d,e,a||100,c,b)):e};I();function Pa(a,c,b,e,d){let f,g,k;"string"===typeof d?(f=d,d=""):f=d.template;g=f.indexOf("$1");k=f.substring(g+2);g=f.substring(0,g);let h=d&&d.boundary,l=!d||!1!==d.clip,m=d&&d.merge&&k&&g&&new RegExp(k+" "+g,"g");d=d&&d.ellipsis;var p=0;if("object"===typeof d){var r=d.template;p=r.length-2;d=d.pattern}"string"!==typeof d&&(d=!1===d?"":"...");p&&(d=r.replace("$1",d));r=d.length-p;let q,t;"object"===typeof h&&(q=h.before,0===q&&(q=-1),t=h.after,0===t&&(t=-1),h=h.total||9E5);p=new Map;for(let wa=0,
V,Ra,ca;wa<c.length;wa++){let da;if(e)da=c,ca=e;else{var w=c[wa];ca=w.field;if(!ca)continue;da=w.result}Ra=b.get(ca);V=Ra.encoder;w=p.get(V);"string"!==typeof w&&(w=V.encode(a),p.set(V,w));for(let la=0;la<da.length;la++){var n=da[la].doc;if(!n)continue;n=Q(n,ca);if(!n)continue;var x=n.trim().split(/\s+/);if(!x.length)continue;n="";var y=[];let ma=[];var E=-1,v=-1,B=0;for(var z=0;z<x.length;z++){var C=x[z],K=V.encode(C);K=1<K.length?K.join(" "):K[0];let u;if(K&&C){var D=C.length,M=(V.split?C.replace(V.split,
""):C).length-K.length,L="",S=0;for(var W=0;W<w.length;W++){var N=w[W];if(N){var G=N.length;G+=M;S&&G<=S||(N=K.indexOf(N),-1<N&&(L=(N?C.substring(0,N):"")+g+C.substring(N,N+G)+k+(N+G<D?C.substring(N+G):""),S=G,u=!0))}}L&&(h&&(0>E&&(E=n.length+(n?1:0)),v=n.length+(n?1:0)+L.length,B+=D,ma.push(y.length),y.push({match:L})),n+=(n?" ":"")+L)}if(!u)C=x[z],n+=(n?" ":"")+C,h&&y.push({text:C});else if(h&&B>=h)break}B=ma.length*(f.length-2);if(q||t||h&&n.length-B>h)if(B=h+B-2*r,z=v-E,0<q&&(z+=q),0<t&&(z+=t),
z<=B)x=q?E-(0<q?q:0):E-((B-z)/2|0),y=t?v+(0<t?t:0):x+B,l||(0<x&&" "!==n.charAt(x)&&" "!==n.charAt(x-1)&&(x=n.indexOf(" ",x),0>x&&(x=0)),y<n.length&&" "!==n.charAt(y-1)&&" "!==n.charAt(y)&&(y=n.lastIndexOf(" ",y),y<v?y=v:++y)),n=(x?d:"")+n.substring(x,y)+(y<n.length?d:"");else{v=[];E={};B={};z={};C={};K={};L=M=D=0;for(W=S=1;;){var P=void 0;for(let u=0,F;u<ma.length;u++){F=ma[u];if(L)if(M!==L){if(z[u+1])continue;F+=L;if(E[F]){D-=r;B[u+1]=1;z[u+1]=1;continue}if(F>=y.length-1){if(F>=y.length){z[u+1]=
1;F>=x.length&&(B[u+1]=1);continue}D-=r}n=y[F].text;if(G=t&&K[u])if(0<G){if(n.length>G)if(z[u+1]=1,l)n=n.substring(0,G);else continue;(G-=n.length)||(G=-1);K[u]=G}else{z[u+1]=1;continue}if(D+n.length+1<=h)n=" "+n,v[u]+=n;else if(l)P=h-D-1,0<P&&(n=" "+n.substring(0,P),v[u]+=n),z[u+1]=1;else{z[u+1]=1;continue}}else{if(z[u])continue;F-=M;if(E[F]){D-=r;z[u]=1;B[u]=1;continue}if(0>=F){if(0>F){z[u]=1;B[u]=1;continue}D-=r}n=y[F].text;if(G=q&&C[u])if(0<G){if(n.length>G)if(z[u]=1,l)n=n.substring(n.length-
G);else continue;(G-=n.length)||(G=-1);C[u]=G}else{z[u]=1;continue}if(D+n.length+1<=h)n+=" ",v[u]=n+v[u];else if(l)P=n.length+1-(h-D),0<=P&&P<n.length&&(n=n.substring(P)+" ",v[u]=n+v[u]),z[u]=1;else{z[u]=1;continue}}else{n=y[F].match;q&&(C[u]=q);t&&(K[u]=t);u&&D++;let xa;F?!u&&r&&(D+=r):(B[u]=1,z[u]=1);F>=x.length-1?xa=1:F<y.length-1&&y[F+1].match?xa=1:r&&(D+=r);D-=f.length-2;if(!u||D+n.length<=h)v[u]=n;else{P=S=W=B[u]=0;break}xa&&(B[u+1]=1,z[u+1]=1)}D+=n.length;P=E[F]=1}if(P)M===L?L++:M++;else{M===
L?S=0:W=0;if(!S&&!W)break;S?(M++,L=M):L++}}n="";for(let u=0,F;u<v.length;u++)F=(u&&B[u]?" ":(u&&!d?" ":"")+d)+v[u],n+=F;d&&!B[v.length]&&(n+=d)}m&&(n=n.replace(m," "));da[la].highlight=n}if(e)break}return c};T.prototype.search=function(a,c,b,e){b||(!c&&O(a)?(b=a,a=""):O(c)&&(b=c,c=0));let d=[];var f=[];let g;let k,h,l;let m=0,p=!0,r;if(b){b.constructor===Array&&(b={index:b});a=b.query||a;var q=b.pluck;var t=b.merge;h=q||b.field||(h=b.index)&&(h.index?null:h);l=this.tag&&b.tag;k=b.suggest;g=(r=(p=!0,this.store)&&b.highlight)||p&&this.store&&b.enrich;c=b.limit||c;var w=b.offset||0;c||(c=100);if(l){l.constructor!==Array&&(l=[l]);var n=[];for(let E=0,v;E<l.length;E++)if(v=l[E],v.field&&v.tag){var x=v.tag;
if(x.constructor===Array)for(var y=0;y<x.length;y++)n.push(v.field,x[y]);else n.push(v.field,x)}else{x=Object.keys(v);for(let B=0,z,C;B<x.length;B++)if(z=x[B],C=v[z],C.constructor===Array)for(y=0;y<C.length;y++)n.push(z,C[y]);else n.push(z,C)}l=n;if(!a){f=[];if(n.length)for(q=0;q<n.length;q+=2)t=Qa.call(this,n[q],n[q+1],c,w,g),d.push({field:n[q],tag:n[q+1],result:t});return f.length?Promise.all(f).then(function(E){for(let v=0;v<E.length;v++)d[v].result=E[v];return d}):d}}h&&h.constructor!==Array&&
(h=[h])}h||(h=this.field);n=!e&&(this.worker||this.db)&&[];for(let E=0,v,B,z;E<h.length;E++){B=h[E];let C;J(B)||(C=B,B=C.field,a=C.query||a,c=C.limit||c,w=C.offset||w,k=C.suggest||k,r=(g=this.store&&(C.enrich||g))&&(b.highlight||r));if(e)v=e[E];else if(x=C||b,y=this.index.get(B),l&&(x.enrich=!1),n){n[E]=y.search(a,c,x);x&&g&&(x.enrich=g);continue}else v=y.search(a,c,x),x&&g&&(x.enrich=g);z=v&&(p?v.length:v.result.length);if(l&&z){x=[];y=0;for(let K=0,D,M;K<l.length;K+=2){D=this.tag.get(l[K]);if(!D)if(k)continue;
else return p?d:new X(d);if(M=(D=D&&D.get(l[K+1]))&&D.length)y++,x.push(D);else if(!k)return p?d:new X(d)}if(y){v=Ga(v,x);z=v.length;if(!z&&!k)return p?v:new X(v);y--}}if(z)f[m]=B,d.push(v),m++;else if(1===h.length)return p?d:new X(d)}if(n){const E=this;return Promise.all(n).then(function(v){return v.length?E.search(a,c,b,v):v})}if(!m)return p?d:new X(d);if(q&&(!g||!this.store))return d[0];n=[];for(w=0;w<f.length;w++){e=d[w];g&&e.length&&"undefined"===typeof e[0].doc&&(e=U.call(this,e));if(q)return p?
r?Pa(a,e,this.index,q,r):e:new X(e);d[w]={field:f[w],result:e}}return t?Sa(d):r?Pa(a,d,this.index,q,r):d};function Sa(a){const c=[],b=I();for(let e=0,d,f;e<a.length;e++){d=a[e];f=d.result;for(let g=0,k,h,l;g<f.length;g++)h=f[g],"object"!==typeof h&&(h={id:h}),k=h.id,(l=b[k])?l.push(d.field):(h.field=b[k]=[d.field],c.push(h))}return c}function Qa(a,c,b,e,d){a=this.tag.get(a);if(!a)return[];if((c=(a=a&&a.get(c))&&a.length-e)&&0<c){if(c>b||e)a=a.slice(e,e+b);d&&(a=U.call(this,a));return a}}
function U(a){if(!this||!this.store)return a;const c=Array(a.length);for(let b=0,e;b<a.length;b++)e=a[b],c[b]={id:e,doc:this.store.get(e)};return c};function T(a){if(!this||this.constructor!==T)return new T(a);const c=a.document||a.doc||a;var b;this.D=[];this.field=[];this.J=[];this.key=(b=c.key||c.id)&&Ta(b,this.J)||"id";this.reg=(this.fastupdate=!!a.fastupdate)?new Map:new Set;this.A=(b=c.store||null)&&b&&!0!==b&&[];this.store=b&&new Map;this.cache=(b=a.cache||null)&&new Y(b);a.cache=!1;this.priority=a.priority||4;b=new Map;let e=c.index||c.field||c;J(e)&&(e=[e]);for(let d=0,f,g;d<e.length;d++)f=e[d],J(f)||(g=f,f=f.field),g=O(g)?Object.assign({},
a,g):a,b.set(f,new Z(g,this.reg)),g.custom?this.D[d]=g.custom:(this.D[d]=Ta(f,this.J),g.filter&&("string"===typeof this.D[d]&&(this.D[d]=new String(this.D[d])),this.D[d].I=g.filter)),this.field[d]=f;if(this.A){a=c.store;J(a)&&(a=[a]);for(let d=0,f,g;d<a.length;d++)f=a[d],g=f.field||f,f.custom?(this.A[d]=f.custom,f.custom.U=g):(this.A[d]=Ta(g,this.J),f.filter&&("string"===typeof this.A[d]&&(this.A[d]=new String(this.A[d])),this.A[d].I=f.filter))}this.index=b;this.tag=null;if(b=c.tag)if("string"===
typeof b&&(b=[b]),b.length){this.tag=new Map;this.B=[];this.T=[];for(let d=0,f,g;d<b.length;d++){f=b[d];g=f.field||f;if(!g)throw Error("The tag field from the document descriptor is undefined.");f.custom?this.B[d]=f.custom:(this.B[d]=Ta(g,this.J),f.filter&&("string"===typeof this.B[d]&&(this.B[d]=new String(this.B[d])),this.B[d].I=f.filter));this.T[d]=g;this.tag.set(g,new Map)}}}
function Ta(a,c){const b=a.split(":");let e=0;for(let d=0;d<b.length;d++)a=b[d],"]"===a[a.length-1]&&(a=a.substring(0,a.length-2))&&(c[e]=!0),a&&(b[e++]=a);e<b.length&&(b.length=e);return 1<e?b:b[0]}A=T.prototype;A.append=function(a,c){return this.add(a,c,!0)};A.update=function(a,c){return this.remove(a).add(a,c)};
A.remove=function(a){O(a)&&(a=Q(a,this.key));for(var c of this.index.values())c.remove(a,!0);if(this.reg.has(a)){if(this.tag&&!this.fastupdate)for(let b of this.tag.values())for(let e of b){c=e[0];const d=e[1],f=d.indexOf(a);-1<f&&(1<d.length?d.splice(f,1):b.delete(c))}this.store&&this.store.delete(a);this.reg.delete(a)}this.cache&&this.cache.remove(a);return this};
A.clear=function(){const a=[];for(const c of this.index.values()){const b=c.clear();b.then&&a.push(b)}if(this.tag)for(const c of this.tag.values())c.clear();this.store&&this.store.clear();this.cache&&this.cache.clear();return a.length?Promise.all(a):this};A.contain=function(a){return this.reg.has(a)};A.cleanup=function(){for(const a of this.index.values())a.cleanup();return this};A.get=function(a){return this.store.get(a)||null};
A.set=function(a,c){"object"===typeof a&&(c=a,a=Q(c,this.key));this.store.set(a,c);return this};A.searchCache=Ua;
A.export=function(a,c,b=0,e=0){if(b<this.field.length){const g=this.field[b];if((c=this.index.get(g).export(a,g,b,e=1))&&c.then){const k=this;return c.then(function(){return k.export(a,g,b+1)})}return this.export(a,g,b+1)}let d,f;switch(e){case 0:d="reg";f=ya(this.reg);c=null;break;case 1:d="tag";f=this.tag&&ua(this.tag,this.reg.size);c=null;break;case 2:d="doc";f=this.store&&sa(this.store);c=null;break;default:return}return Aa.call(this,a,c,d,f,b,e)};
A.import=function(a,c){var b=a.split(".");"json"===b[b.length-1]&&b.pop();a=2<b.length?b[0]:"";b=2<b.length?b[2]:b[1];if(c){"string"===typeof c&&(c=JSON.parse(c));if(a)return this.index.get(a).import(b,c);switch(b){case "reg":this.fastupdate=!1;this.reg=za(c,this.reg);for(let e=0,d;e<this.field.length;e++)d=this.index.get(this.field[e]),d.fastupdate=!1,d.reg=this.reg;break;case "tag":this.tag=va(c,this.tag);break;case "doc":this.store=ta(c,this.store)}}};ka(T.prototype);function Ua(a,c,b){const e=("object"===typeof a?""+a.query:a).toLowerCase();this.cache||(this.cache=new Y);let d=this.cache.get(e);if(!d){d=this.search(a,c,b);if(d.then){const f=this;d.then(function(g){f.cache.set(e,g);return g})}this.cache.set(e,d)}return d}function Y(a){this.limit=a&&!0!==a?a:1E3;this.cache=new Map;this.h=""}Y.prototype.set=function(a,c){this.cache.set(this.h=a,c);this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};
Y.prototype.get=function(a){const c=this.cache.get(a);c&&this.h!==a&&(this.cache.delete(a),this.cache.set(this.h=a,c));return c};Y.prototype.remove=function(a){for(const c of this.cache){const b=c[0];c[1].includes(a)&&this.cache.delete(b)}};Y.prototype.clear=function(){this.cache.clear();this.h=""};const Va={normalize:!1,numeric:!1,dedupe:!1};const Wa={};const Xa=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]);const Ya=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),Za=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"];const $a={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"\u00df":2,d:3,t:3,l:4,m:5,n:5,r:6};var ab={Exact:Va,Default:Wa,Normalize:Wa,LatinBalance:{mapper:Xa},LatinAdvanced:{mapper:Xa,matcher:Ya,replacer:Za},LatinExtra:{mapper:Xa,replacer:Za.concat([/(?!^)[aeo]/g,""]),matcher:Ya},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(a){for(let b=0;b<a.length;b++){var c=a[b];let e=c.charAt(0),d=$a[e];for(let f=1,g;f<c.length&&(g=c.charAt(f),"h"===g||"w"===g||!(g=$a[g])||g===d||(e+=g,d=g,4!==e.length));f++);a[b]=e}}},CJK:{split:""},LatinExact:Va,LatinDefault:Wa,LatinSimple:Wa};Z.prototype.remove=function(a,c){const b=this.reg.size&&(this.fastupdate?this.reg.get(a):this.reg.has(a));if(b){if(this.fastupdate)for(let e=0,d;e<b.length;e++){if(d=b[e])if(2>d.length)d.pop();else{const f=d.indexOf(a);f===b.length-1?d.pop():d.splice(f,1)}}else bb(this.map,a),this.depth&&bb(this.ctx,a);c||this.reg.delete(a)}this.cache&&this.cache.remove(a);return this};
function bb(a,c){let b=0;var e="undefined"===typeof c;if(a.constructor===Array)for(let d=0,f,g;d<a.length;d++){if((f=a[d])&&f.length)if(e)b++;else if(g=f.indexOf(c),0<=g){1<f.length?(f.splice(g,1),b++):delete a[d];break}else b++}else for(let d of a.entries()){e=d[0];const f=bb(d[1],c);f?b+=f:a.delete(e)}return b};const cb={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};Z.prototype.add=function(a,c,b,e){if(c&&(a||0===a)){if(!e&&!b&&this.reg.has(a))return this.update(a,c);e=this.depth;c=this.encoder.encode(c,!e);const l=c.length;if(l){const m=I(),p=I(),r=this.resolution;for(let q=0;q<l;q++){let t=c[this.rtl?l-1-q:q];var d=t.length;if(d&&(e||!p[t])){var f=this.score?this.score(c,t,q,null,0):db(r,l,q),g="";switch(this.tokenize){case "full":if(2<d){for(let w=0,n;w<d;w++)for(f=d;f>w;f--){g=t.substring(w,f);n=this.rtl?d-1-w:w;var k=this.score?this.score(c,t,q,g,n):db(r,
l,q,d,n);eb(this,p,g,k,a,b)}break}case "bidirectional":case "reverse":if(1<d){for(k=d-1;0<k;k--){g=t[this.rtl?d-1-k:k]+g;var h=this.score?this.score(c,t,q,g,k):db(r,l,q,d,k);eb(this,p,g,h,a,b)}g=""}case "forward":if(1<d){for(k=0;k<d;k++)g+=t[this.rtl?d-1-k:k],eb(this,p,g,f,a,b);break}default:if(eb(this,p,t,f,a,b),e&&1<l&&q<l-1)for(d=I(),g=this.S,f=t,k=Math.min(e+1,this.rtl?q+1:l-q),d[f]=1,h=1;h<k;h++)if((t=c[this.rtl?l-1-q-h:q+h])&&!d[t]){d[t]=1;const w=this.score?this.score(c,f,q,t,h-1):db(g+(l/
2>g?0:1),l,q,k-1,h-1),n=this.bidirectional&&t>f;eb(this,m,n?f:t,w,a,b,n?t:f)}}}}this.fastupdate||this.reg.add(a)}}return this};function eb(a,c,b,e,d,f,g){let k=g?a.ctx:a.map,h;if(!c[b]||g&&!(h=c[b])[g])g?(c=h||(c[b]=I()),c[g]=1,(h=k.get(g))?k=h:k.set(g,k=new Map)):c[b]=1,(h=k.get(b))?k=h:k.set(b,k=[]),k=k[e]||(k[e]=[]),f&&k.includes(d)||(k.push(d),a.fastupdate&&((c=a.reg.get(d))?c.push(k):a.reg.set(d,[k])))}
function db(a,c,b,e,d){return b&&1<a?c+(e||0)<=a?b+(d||0):(a-1)/(c+(e||0))*(b+(d||0))+1|0:0};Z.prototype.search=function(a,c,b){b||(c||"object"!==typeof a?"object"===typeof c&&(b=c,c=0):(b=a,a=""));var e=[],d=0;if(b){a=b.query||a;c=b.limit||c;d=b.offset||0;var f=b.context;var g=b.suggest;var k=!0;var h=b.resolution}else k=!0;f=this.depth&&!1!==f;a=this.encoder.encode(a,!f);b=a.length;c=c||(k?100:0);if(1===b)return g=c,(c=fb(this,a[0],""))&&c.length?Ha.call(this,c,g,d):[];if(2===b&&f&&!g)return g=c,(c=fb(this,a[1],a[0]))&&c.length?Ha.call(this,c,g,d):[];k=I();let l=0;if(f){var m=a[0];l=1}h||
0===h||(h=m?this.S:this.resolution);for(let t,w;l<b;l++){if((w=a[l])&&!k[w]){k[w]=1;t=fb(this,w,m);a:{f=t;var p=e,r=g,q=h;let n=[];if(f&&f.length){if(f.length<=q){p.push(f);t=void 0;break a}for(let x=0,y;x<q;x++)if(y=f[x])n[x]=y;if(n.length){p.push(n);t=void 0;break a}}t=r?void 0:n}if(t){e=t;break}m&&(g&&t&&e.length||(m=w))}g&&m&&l===b-1&&!e.length&&(h=this.resolution,m="",l=-1,k=I())}a:{a=e;e=a.length;m=a;if(1<e)m=Ea(a,h,c,d,g);else if(1===e){g=Ha.call(null,a[0],c,d);break a}g=m}return g};
function fb(a,c,b){let e;b&&(e=a.bidirectional&&c>b)&&(e=b,b=c,c=e);a=b?(a=a.ctx.get(b))&&a.get(c):a.map.get(c);return a};function Z(a,c){if(!this||this.constructor!==Z)return new Z(a);if(a){var b=J(a)?a:a.preset;b&&(a=Object.assign({},cb[b],a))}else a={};b=a.context;const e=!0===b?{depth:1}:b||{},d=J(a.encoder)?ab[a.encoder]:a.encode||a.encoder||{};this.encoder=d.encode?d:"object"===typeof d?new ja(d):{encode:d};this.resolution=a.resolution||9;this.tokenize=b=(b=a.tokenize)&&"default"!==b&&"exact"!==b&&b||"strict";this.depth="strict"===b&&e.depth||0;this.bidirectional=!1!==e.bidirectional;this.fastupdate=!!a.fastupdate;
this.score=a.score||null;b=!1;this.map=new Map;this.ctx=new Map;this.reg=c||(this.fastupdate?new Map:new Set);this.S=e.resolution||3;this.rtl=d.rtl||a.rtl||!1;this.cache=(b=a.cache||null)&&new Y(b);this.priority=a.priority||4}A=Z.prototype;A.clear=function(){this.map.clear();this.ctx.clear();this.reg.clear();this.cache&&this.cache.clear();return this};A.append=function(a,c){return this.add(a,c,!0)};A.contain=function(a){return this.reg.has(a)};
A.update=function(a,c){const b=this,e=this.remove(a);return e&&e.then?e.then(()=>b.add(a,c)):this.add(a,c)};A.cleanup=function(){if(!this.fastupdate)return this;bb(this.map);this.depth&&bb(this.ctx);return this};A.searchCache=Ua;A.export=function(a,c,b=0,e=0){let d,f;switch(e){case 0:d="reg";f=ya(this.reg);break;case 1:d="cfg";f=null;break;case 2:d="map";f=sa(this.map,this.reg.size);break;case 3:d="ctx";f=ua(this.ctx,this.reg.size);break;default:return}return Aa.call(this,a,c,d,f,b,e)};
A.import=function(a,c){if(c)switch("string"===typeof c&&(c=JSON.parse(c)),a=a.split("."),"json"===a[a.length-1]&&a.pop(),3===a.length&&a.shift(),a=1<a.length?a[1]:a[0],a){case "reg":this.fastupdate=!1;this.reg=za(c,this.reg);break;case "map":this.map=ta(c,this.map);break;case "ctx":this.ctx=va(c,this.ctx)}};
A.serialize=function(a=!0){let c="",b="",e="";if(this.reg.size){let f;for(var d of this.reg.keys())f||(f=typeof d),c+=(c?",":"")+("string"===f?'"'+d+'"':d);c="index.reg=new Set(["+c+"]);";b=Ba(this.map,f);b="index.map=new Map(["+b+"]);";for(const g of this.ctx.entries()){d=g[0];let k=Ba(g[1],f);k="new Map(["+k+"])";k='["'+d+'",'+k+"]";e+=(e?",":"")+k}e="index.ctx=new Map(["+e+"]);"}return a?"function inject(index){"+c+b+e+"}":c+b+e};ka(Z.prototype);I();const gb={Index:Z,Charset:ab,Encoder:ja,Document:T,Worker:null,Resolver:null,IndexedDB:null,Language:{}},hb="undefined"!==typeof self?self:"undefined"!==typeof global?global:self;let ib;(ib=hb.define)&&ib.amd?ib([],function(){return gb}):"object"===typeof hb.exports?hb.exports=gb:hb.FlexSearch=gb;}(this||self));
